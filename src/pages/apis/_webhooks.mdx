import { Endpoint } from '@site/src/components/endpoint';

<IntersectingHeader id="tag/Webhooks" title="Webhooks"/>
<div className="row section">
    <div className="col col--6">
        A webhook (also called a web callback or HTTP push API) is a way for Scalekit to provide your applications with real-time information. A webhook delivers data to your applications as it happens, meaning you get data immediately, unlike typical APIs where you would need to poll for data very frequently to get it in real-time. Events represent specific actions or changes, while webhooks are the mechanism used to deliver these event notifications to your specified endpoint.

        By leveraging webhooks, you can build responsive and dynamic integrations that react immediately to changes in Scalekit System, enabling you to keep your systems in sync and automate user lifecycle management and other related use cases.
    </div>
    <div className="col col--6">
        <CodeWithHeader title="List of Events">
            <div className="endpoints">
             <Endpoint
                    key='scalekit.dir.sync.enable'
                    href='#tag/Webhooks/scalekit.dir.sync.enable'
                    method='event'
                    label='scalekit.dir.sync.enable'
                />
                <Endpoint
                    key='scalekit.dir.sync.disable'
                    href='#tag/Webhooks/scalekit.dir.sync.disable'
                    method='event'
                    label='scalekit.dir.sync.disable'
                />
                <Endpoint
                    key='scalekit.dir.user.create'
                    href='#tag/Webhooks/scalekit.dir.user.create'
                    method='event'
                    label='scalekit.dir.user.create'
                />
                <Endpoint
                    key='scalekit.dir.user.update'
                    href='#tag/Webhooks/scalekit.dir.user.update'
                    method='event'
                    label='scalekit.dir.user.update'
                />
                <Endpoint
                    key='scalekit.dir.user.delete'
                    href='#tag/Webhooks/scalekit.dir.user.delete'
                    method='event'
                    label='scalekit.dir.user.delete'
                />
                <Endpoint
                    key='scalekit.dir.group.create'
                    href='#tag/Webhooks/scalekit.dir.group.create'
                    method='event'
                    label='scalekit.dir.group.create'
                />
                <Endpoint
                    key='scalekit.dir.group.update'
                    href='#tag/Webhooks/scalekit.dir.group.update'
                    method='event'
                    label='scalekit.dir.group.update'
                />
                <Endpoint
                    key='scalekit.dir.group.delete'
                    href='#tag/Webhooks/scalekit.dir.group.delete'
                    method='event'
                    label='scalekit.dir.group.delete'
                />

            </div>
        </CodeWithHeader>
    </div>

</div>
<IntersectingHeader id="tag/Webhooks/object" title="Event Object" subheading="true" classList="ApiCategoryList"/>
<div className="row section">
    <div className="col col--6">
       Every webhook payload has two key components: Event Metadata and Event Data.
       <ul className="ApiReference-Parameters">
            <li className="ApiReference-Parameter header">Event Metadata</li>
            <Parameter attrKey="event_spec_ver" type="string" description="Version of the event specification (currently '1')." />
            <Parameter attrKey="category" type="string" description="Indicates the event category (Example: 'dir' for directory-related events)." />
            <Parameter attrKey="type" type="string" description="Specifies the exact event type (Example: 'scalekit.dir.user.create' for user creation)." />
            <Parameter attrKey="occured_at" type="string" description="Timestamp of when the event occurred." />
            <Parameter attrKey="source" type="string" description="The origin of the event (always 'scalekit' in this case)." />
            <Parameter attrKey="object" type="string" description="The type of object affected (Example: 'directory_user')." />
            <li className="ApiReference-Parameter header">Event Data</li>
            <Parameter attrKey="data" type="object" description="Contains latest object data after the event." />
            <Parameter attrKey="old_data" type="object" description="Contains object data before the event." />
        </ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="Sample Event Payload">

        ```json
        {
          "event_spec_ver": "1",
          "category": "dir",
          "type": "scalekit.dir.user.create",
          "occured_at": "2024-08-21T10:20:17.072Z",
          "source": "scalekit",
          "object": "directory_user",
          "data": {
            // Event Data
          },
          "old_data": {
            // Old data of the object whenever applicable.
          }
        }
        ```
        </CodeWithHeader>
    </div>

</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.sync.enable" title="scalekit.dir.sync.enable" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a directory sync is enabled.
    <ul className="ApiReference-Parameters">
    <li className="ApiReference-Parameter header">Event Data</li>
            <Parameter attrKey="DirectoryType" type="string" description="The type of directory synchronization." />
            <Parameter attrKey="Enabled" type="boolean" description="Indicates if the directory sync is enabled." />
            <Parameter attrKey="EnvironmentID" type="string" description="Identifier for the environment." />
            <Parameter attrKey="ID" type="string" description="Unique identifier for the directory sync configuration." />
            <Parameter attrKey="LastSyncAt" type="null" description="Timestamp of the last synchronization, null if not yet synced." />
            <Parameter attrKey="Mappings" type="null" description="Mappings for directory synchronization, null if not specified." />
            <Parameter attrKey="Name" type="string" description="Name of the directory sync configuration." />
            <Parameter attrKey="OrganizationID" type="string" description="Identifier for the organization." />
            <Parameter attrKey="Provider" type="string" description="The provider of the directory." />
            <Parameter attrKey="Settings" type="null" description="Settings for the directory synchronization, null if not specified." />
            <Parameter attrKey="Source" type="string" description="Source of the directory synchronization." />
            <Parameter attrKey="Status" type="string" description="Current status of the directory synchronization process." />
            <Parameter attrKey="updated_at" type="string" description="Timestamp of when the configuration was last updated." />
            <Parameter attrKey="spec_version" type="string" description="Specification version of the event." >
        <details>
            <summary>Metadata</summary>
            <Parameter attrKey="id" type="string" description="Unique identifier for the event." />
            <Parameter attrKey="type" type="string" description="Type of the event, indicating the action that occurred." />
            <Parameter attrKey="occurred_at" type="string" description="Timestamp when the event occurred." />
            <Parameter attrKey="environment_id" type="string" description="Identifier for the environment where the event took place." />
            <Parameter attrKey="organization_id" type="string" description="Identifier for the organization associated with the event." />
            <Parameter attrKey="object" type="string" description="Type of object the event relates to." />
            <Parameter attrKey="data" type="object" description="Detailed information about the event." />
        </details>
    </Parameter>
</ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="scalekit.dir.sync.enable">
        <JsonViewer src={{
          "spec_version": "",
          "id": "evt_40649321678373383",
          "type": "scalekit.dir.sync.enable",
          "occurred_at": "2024-10-07T10:14:43.793861Z",
          "environment_id": "env_33245698191261706",
          "organization_id": "org_40649310706073971",
          "object": "OBJECT_TYPE_UNSPECIFIED",
          "data": {
            "DirectoryType": "SCIM",
            "Enabled": true,
            "EnvironmentID": "env_33245698191261706",
            "ID": "dir_40649321661596167",
            "LastSyncAt": null,
            "Mappings": null,
            "Name": "",
            "OrganizationID": "org_40649310706073971",
            "Provider": "MICROSOFT_AD",
            "Settings": null,
            "Source": "",
            "Status": "IN_PROGRESS",
            "updated_at": "2024-10-07T10:14:43.785152047Z"
          }
        }} />
        </CodeWithHeader>
    </div>
</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.sync.disable" title="scalekit.dir.sync.disable" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a directory sync is disabled.
    </div>
    <div className='col col--6'>
          <CodeWithHeader title="scalekit.dir.group.delete">
          <JsonViewer src={{
                "message":"Engineering in Progress"
              }} />

          </CodeWithHeader>
      </div>
</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.user.create" title="scalekit.dir.user.create" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a new directory user is created.
       <ul className="ApiReference-Parameters">
            <li className="ApiReference-Parameter header">Event Data</li>
            <Parameter attrKey="id" type="string" description="Unique ID of the Directory User." />
            <Parameter attrKey="organization_id" type="string" description="Unique ID of the Organization to which this directory user belongs." />
            <Parameter attrKey="dp_id" type="string" description="Unique ID of the User in the Directory Provider (IdP) system." />
            <Parameter attrKey="preferrred_username" type="string" description="Preferred username of the directory user." />
            <Parameter attrKey="email" type="string" description="Email of the directory user." />
            <Parameter attrKey="active" type="boolean" description="Indicates if the directory user is active." />
            <Parameter attrKey="name" type="string" description="Fully formatted name of the directory user." />
            <Parameter attrKey="roles" type="array" description="Array of roles assigned to the directory user.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="role" type="string" description="Role of the directory user." />
                    <Parameter attrKey="name" type="string" description="Name of the directory user." />
                </details>
            </Parameter>
            <Parameter attrKey="groups" type="array" description="Array of groups to which the directory user belongs.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="id" type="string" description="ID of the directory group." />
                    <Parameter attrKey="name" type="string" description="Name of the directory group." />
                </details>
            </Parameter>
            <Parameter attrKey="given_name" type="string" description="Given name of the directory user." />
            <Parameter attrKey="family_name" type="string" description="Family name of the directory user." />
            <Parameter attrKey="nickname" type="string" description="Nickname of the directory user." />
            <Parameter attrKey="picture" type="string" description="URL of the directory user's profile picture." />
            <Parameter attrKey="phone_number" type="string" description="Phone number of the directory user." />
            <Parameter attrKey="address" type="object" description="Address of the directory user.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="postal_code" type="string" description="Postal code of the directory user address." />
                    <Parameter attrKey="state" type="string" description="State of the directory user address." />
                    <Parameter attrKey="formatted" type="string" description="Formatted address of the directory user." />
                </details>
            </Parameter>
            <Parameter attrKey="custom_attributes" type="object" description="Custom attributes of the directory user." />
            <Parameter attrKey="raw_attributes" type="object" description="Raw attributes of the directory user as received from the Directory Provider (IdP)." />
        </ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="scalekit.dir.user.create">
        <JsonViewer src={{
          "event_spec_ver": "1",
          "category": "dir",
          "type": "scalekit.dir.user.create",
          "occured_at": "2024-08-21T10:20:17.072Z",
          "source": "scalekit",
          "object": "directory_user",
          "data": {
            "id": "diruser_12312312312312",
            "organization_id": "org_12312312312312",
            "dp_id": "<scim_external_id>",
            "preferrred_username": "<idp_user_name>",
            "email": "john.doe@example.com",
            "active": true,
            "name": "John Doe",
            "roles": [
              {
                "role": "billing_admin",
                "name": "Billing Admin"
              }
            ],
            "groups": [
              {
                "id": "dirgroup_12312312312312",
                "name": "Group Name"
              }
            ],
            "given_name": "John",
            "family_name": "Doe",
            "nickname": "Jhonny boy",
            "picture": "https://image.com/profile.jpg",
            "phone_number": "1234567892",
            "address": {
              "postal_code": "64112",
              "state": "Missouri",
              "formatted": "123, Oxford Lane, Kansas City, Missouri, 64112"
            },
            "custom_attributes": {
              "attribute1": "value1",
              "attribute2": "value2"
            },
            "raw_attributes": {
              // SCIM payload
            }
          }
        }} />

        </CodeWithHeader>
    </div>

</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.user.update" title="scalekit.dir.user.update" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a directory user is updated. Usually, directory user data is updated in any of the following scenarios:
       1. User Profile is updated in the Directory Provider (IdP) system.
       2. User is added to or removed from a group.
       3. If [GBAC](/dir-sync/gbac) is enabled, User is assigned or removed from a role based on the group membership.
       <ul className="ApiReference-Parameters">
            <li className="ApiReference-Parameter header">Event Data</li>
            <Parameter attrKey="id" type="string" description="Unique ID of the Directory User." />
            <Parameter attrKey="organization_id" type="string" description="Unique ID of the Organization to which this directory user belongs." />
            <Parameter attrKey="dp_id" type="string" description="Unique ID of the User in the Directory Provider (IdP) system." />
            <Parameter attrKey="preferrred_username" type="string" description="Preferred username of the directory user." />
            <Parameter attrKey="email" type="string" description="Email of the directory user." />
            <Parameter attrKey="active" type="boolean" description="Indicates if the directory user is active." />
            <Parameter attrKey="name" type="string" description="Fully formatted name of the directory user." />
            <Parameter attrKey="roles" type="array" description="Array of roles assigned to the directory user.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="role" type="string" description="Role of the directory user." />
                    <Parameter attrKey="name" type="string" description="Name of the directory user." />
                </details>
            </Parameter>
            <Parameter attrKey="groups" type="array" description="Array of groups to which the directory user belongs.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="id" type="string" description="ID of the directory group." />
                    <Parameter attrKey="name" type="string" description="Name of the directory group." />
                </details>
            </Parameter>
            <Parameter attrKey="given_name" type="string" description="Given name of the directory user." />
            <Parameter attrKey="family_name" type="string" description="Family name of the directory user." />
            <Parameter attrKey="nickname" type="string" description="Nickname of the directory user." />
            <Parameter attrKey="picture" type="string" description="URL of the directory user's profile picture." />
            <Parameter attrKey="phone_number" type="string" description="Phone number of the directory user." />
            <Parameter attrKey="address" type="object" description="Address of the directory user.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="postal_code" type="string" description="Postal code of the directory user address." />
                    <Parameter attrKey="state" type="string" description="State of the directory user address." />
                    <Parameter attrKey="formatted" type="string" description="Formatted address of the directory user." />
                </details>
            </Parameter>
            <Parameter attrKey="custom_attributes" type="object" description="Custom attributes of the directory user." />
            <Parameter attrKey="raw_attributes" type="object" description="Raw attributes of the directory user as received from the Directory Provider (IdP)." />

        </ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="scalekit.dir.user.update">
<JsonViewer src={{
          "event_spec_ver": "1",
          "category": "dir",
          "type": "scalekit.dir.user.update",
          "occured_at": "2024-08-21T10:20:17.072Z",
          "source": "scalekit",
          "object": "directory_user",
          "data": {
            "id": "diruser_12312312312312",
            "organization_id": "org_12312312312312",
            "dp_id": "<scim_external_id>",
            "preferrred_username": "<idp_user_name>",
            "email": "john.doe@example.com",
            "active": true,
            "name": "John Doe",
            "roles": [
              {
                "role": "billing_admin",
                "name": "Billing Admin"
              }
            ],
            "groups": [
              {
                "id": "dirgroup_12312312312312",
                "name": "Group Name"
              }
            ],
            "given_name": "John",
            "family_name": "Doe",
            "nickname": "Jhonny boy",
            "picture": "https://image.com/profile.jpg",
            "phone_number": "1234567892",
            "address": {
              "postal_code": "64112",
              "state": "Missouri",
              "formatted": "123, Oxford Lane, Kansas City, Missouri, 64112"
            },
            "custom_attributes": {
              "attribute1": "value1",
              "attribute2": "value2"
            },
            "raw_attributes": {
              // SCIM payload
            }
          },
          "old_data": {
            // Old data of the directory user before the update
          }
        }} />
        </CodeWithHeader>
    </div>

</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.user.delete" title="scalekit.dir.user.delete" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a directory user is deleted.
       <ul className="ApiReference-Parameters">
            <li className="ApiReference-Parameter header">Event Data</li>
            <Parameter attrKey="id" type="string" description="Unique ID of the Directory User." />
            <Parameter attrKey="organization_id" type="string" description="Unique ID of the Organization to which this directory user belongs." />
            <Parameter attrKey="dp_id" type="string" description="Unique ID of the User in the Directory Provider (IdP) system." />
            <Parameter attrKey="email" type="string" description="Email of the directory user." />
        </ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="scalekit.dir.user.delete">
        <JsonViewer src={{
          "event_spec_ver": "1",
          "category": "dir",
          "type": "scalekit.dir.user.delete",
          "occured_at": "2024-08-21T10:20:17.072Z",
          "source": "scalekit",
          "object": "directory_user",
          "data": {
            "id": "diruser_12312312312312",
            "organization_id": "org_12312312312312",
            "dp_id": "<scim_external_id>",
            "email": "john.doe@example.com"
          }
        }} />

        </CodeWithHeader>
    </div>

</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.group.create" title="scalekit.dir.group.create" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a new directory group is created.
       <ul className="ApiReference-Parameters">
    <li className="ApiReference-Parameter header">Event Data</li>


            <Parameter attrKey="directory_id" type="string" description="Unique identifier for the directory." />
            <Parameter attrKey="display_name" type="string" description="Display name of the directory group." />
            <Parameter attrKey="external_id" type="null" description="External identifier for the group, null if not specified." />
            <Parameter attrKey="id" type="string" description="Unique identifier for the directory group." />
            <Parameter attrKey="organization_id" type="string" description="Identifier for the organization associated with the group." />
            <Parameter attrKey="raw_attributes" type="object" description="Raw attributes of the directory group.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="displayName" type="string" description="Display name of the group as received from the directory provider." />
                    <Parameter attrKey="members" type="null" description="Members of the group, null if not specified or empty." />
                </details>
            </Parameter>


    <Parameter attrKey="environment_id" type="string" description="Identifier for the environment where the event occurred." />
    <Parameter attrKey="id" type="string" description="Unique identifier for the event." />
    <Parameter attrKey="object" type="string" description="Type of object the event relates to." />
    <Parameter attrKey="occurred_at" type="string" description="Timestamp when the event occurred." />
    <Parameter attrKey="organization_id" type="string" description="Identifier for the organization associated with the event." />
    <Parameter attrKey="spec_version" type="string" description="Specification version of the event." />
    <Parameter attrKey="type" type="string" description="Type of the event, indicating the action that occurred." />
</ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="scalekit.dir.group.create">
        <JsonViewer src={{
              "data": {
                "directory_id": "dir_38610496391217780",
                "display_name": "Avengers",
                "external_id": null,
                "id": "dirgroup_38862741498233423",
                "organization_id": "org_38609339635728478",
                "raw_attributes": {
                  "displayName": "Avengers",
                  "members": null
                }
              },
              "environment_id": "env_32080745237316098",
              "id": "evt_38862741515010639",
              "object": "DirectoryGroup",
              "occurred_at": "2024-09-25T02:26:39.036398577Z",
              "organization_id": "org_38609339635728478",
              "spec_version": "1",
              "type": "scalekit.dir.group.create"
            }} />

        </CodeWithHeader>
    </div>
</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.group.update" title="scalekit.dir.group.update" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a directory group is updated.
       <ul className="ApiReference-Parameters">
    <li className="ApiReference-Parameter header">Event Data</li>
    <Parameter attrKey="directory_id" type="string" description="Unique identifier for the directory." />
    <Parameter attrKey="display_name" type="string" description="Display name of the directory group." />
    <Parameter attrKey="external_id" type="null" description="External identifier for the group, null if not specified." />
    <Parameter attrKey="id" type="string" description="Unique identifier for the directory group." />
    <Parameter attrKey="organization_id" type="string" description="Identifier for the organization associated with the group." />
    <Parameter attrKey="raw_attributes" type="object" description="Raw attributes of the directory group.">
        <details>
            <summary>Child Attributes</summary>
            <Parameter attrKey="displayName" type="string" description="Display name of the group as received from the directory provider." />
            <Parameter attrKey="members" type="array" description="Array of members in the group.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="display" type="string" description="Display name or email of the group member." />
                    <Parameter attrKey="value" type="string" description="Unique identifier for the group member." />
                </details>
            </Parameter>
        </details>
    </Parameter>
    <Parameter attrKey="environment_id" type="string" description="Identifier for the environment where the event occurred." />
    <Parameter attrKey="id" type="string" description="Unique identifier for the event." />
    <Parameter attrKey="object" type="string" description="Type of object the event relates to." />
    <Parameter attrKey="occurred_at" type="string" description="Timestamp when the event occurred." />
    <Parameter attrKey="organization_id" type="string" description="Identifier for the organization associated with the event." />
    <Parameter attrKey="spec_version" type="string" description="Specification version of the event." />
    <Parameter attrKey="type" type="string" description="Type of the event, indicating the action that occurred." />
</ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="scalekit.dir.group.update">
        <JsonViewer src={{
          "data": {
            "directory_id": "dir_38610496391217780",
            "display_name": "Avengers",
            "external_id": null,
            "id": "dirgroup_38862741498233423",
            "organization_id": "org_38609339635728478",
            "raw_attributes": {
              "displayName": "Avengers",
              "members": [
                {
                  "display": "testuser2@gmail.com",
                  "value": "diruser_38864946578129487"
                }
              ]
            }
          },
          "environment_id": "env_32080745237316098",
          "id": "evt_38864948910162368",
          "object": "DirectoryGroup",
          "occurred_at": "2024-09-25T02:48:34.745030921Z",
          "organization_id": "org_38609339635728478",
          "spec_version": "1",
          "type": "scalekit.dir.group.update"
        }} />

        </CodeWithHeader>
    </div>
</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.group.delete" title="scalekit.dir.group.delete" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a directory group is deleted.
    </div>
    <div className='col col--6'>
          <CodeWithHeader title="scalekit.dir.group.delete">
          <JsonViewer src={{
            "data": {
              "directory_id": "dir_39802485862301855",
              "display_name": "Admins",
              "dp_id": "7c66a173-79c6-4270-ac78-8f35a8121e0a",
              "id": "dirgroup_40072007005503806",
              "organization_id": "org_39802449573184223",
              "raw_attributes": {
                "displayName": "Admins",
                "externalId": "7c66a173-79c6-4270-ac78-8f35a8121e0a",
                "members": [
                  {
                    "value": "diruser_39805917708943658"
                  },
                  {
                    "value": "diruser_39805918430364405"
                  },
                  {
                    "value": "diruser_39804927869976735"
                  }
                ]
              }
            },
            "environment_id": "env_12205603854221623",
            "id": "evt_40650399597723966",
            "object": "DirectoryGroup",
            "occurred_at": "2024-10-07T10:25:26.289331747Z",
            "organization_id": "org_39802449573184223",
            "spec_version": "1",
            "type": "scalekit.dir.group.delete"
          }} />

          </CodeWithHeader>
      </div>
</div>
