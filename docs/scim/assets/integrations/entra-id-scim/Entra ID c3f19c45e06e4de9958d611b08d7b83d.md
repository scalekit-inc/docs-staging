# Entra ID

_Subtitle -_ Sync user lists with app being onboarded and Entra ID

# Overview

This guide is designed to help administrators seamlessly sync their EntraID directory with an application they want to
onboard to their organization. By integrating your application with Entra ID, you can automate user management tasks and
ensure that access rights are consistently up-to-date.

This registration sets up the following:

1. **Endpoint**: This is the URL where EntraID will send requests to the app you are onboarding. It acts as a
   communication point between EntraID and your application.
2. **Bearer Token**: This token is used by Okta to authenticate its requests to the endpoint. It ensures that the
   requests are secure and authorized.

By setting up these components, you enable seamless synchronization between your application and the EntraID directory.

# Create Endpoint and Bearer Token

Open the Admin Portal from the app being onboarded and select the "Directory Sync" tab. A list of Directory Providers
will be displayed. Choose "Entra ID" as your Directory Provider. If the Admin Portal is not accessible from the app,
request instructions from the app owner.

(image)

<aside>
üí°

If the "Directory Sync" tab is not visible, it typically indicates that the feature is not enabled for your
organization. Contact the app owner to enable it via the Scalekit Dashboard by navigating to Organizations > Your
Organization > Enable Directory Sync.

</aside>

(image)

After selecting "EntraID," click "Configure." This action will generate an Endpoint URL and Bearer token for your
organization, allowing the app to listen to events and maintain synchronization with your organization.

# Add a New Application in EntraID

We create a new app in Microsoft Entra ID to send users related updates to app that you want to onboard to your
organization.

Go to Microsoft Azure portal and select ‚ÄúMicrosoft Entra ID‚Äù.

(screenshot: of the azure portal)

You should see ‚Äú+ New application‚Äù button in ‚ÄúManage > All applications‚Äù Tab. Click ‚Äú+New application‚Äù.

(screenshot of the all apps page)

Azure lists feature applications. Click ‚Äú+ Create your own application‚Äù on this page. A modal would open up on the right
hand side.

(screenshot of modal)

Give a name for you want to onboard. For the sake of this guide, let‚Äôs call it ‚ÄúHero SaaS‚Äù as an example. Leave the
defaults as-is and click ‚ÄúCreate‚Äù.

( screenshot with spotlight on create)

This will land you within the ‚ÄúHero SaaS‚Äù app‚Äôs overview. From the left sidebar select ‚ÄúManage > Provisioning‚Äù. You
should see couple of things that you can configure.

Set the Provisioning Mode to be ‚ÄúAutomatic‚Äù

In the Admin Credentials section, set Endpoint to be Tenant URL whereas Secret Token to be the Bearer Token we generated
previously.

(screenshot of Mode and Admin Credentials inputd‚Äô)

Next comes the Mappings section. This section is used to map attributes of a user information to Hero SaaS. At this
point, we will focus on simply enabling user provisioning.

Click on ‚ÄúProvision Microsoft Entra ID Users‚Äù hyperlink and make sure ‚ÄúEnabled‚Äù field is toggled to ‚ÄúYes‚Äù.

(screenshot)

If everything is okay, click ‚ÄúX‚Äù to close the full page modal.

Once these is all setup, reload the page for the changes to take effect and go to ‚Äú Overview > Manage > Provisioning ‚Äú
you will notice a new section appear in the modal called ‚ÄúProvisioning Status‚Äù. Make sure it toggled to ‚ÄúOn‚Äù state.

With this Entra ID is successfully setup to send events to Hero SaaS when users are added or removed. Let try it out.

In the Hero SaaS Application we just created, go to ‚ÄúProvision on demand‚Äù. Input any name of any user from your user
list and click ‚ÄúProvision‚Äù.

(screnshot of Provision on demand)

Once provisioned, you should be able to see the users in the admin portal. This gives you a brief idea about how many
users have access to the Hero SaaS app.

(screen shot of user list)

Note that you can provision or deprovision users from ‚ÄúManage > User and groups > Add user/group‚Äù. According to
Microsoft docs, it takes about 40 mins to successfully send these events to Hero SaaS App.
