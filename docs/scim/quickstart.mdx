---
title: Quickstart
---

import InstallSDK from '@site/docs/sso/templates/_install-sdk.md';

# Quickstart

<Subtitle>Automate User Provisioning and Deprovisioning</Subtitle>

Enterprises need to automatically provision and de-provision employee access to applications to
ensure security. Scalekit simplifies this process by providing a single interface to your app,
abstracting the complexities of various directory providers.

With Scalekit, you can:

- Use **Webhooks** to listen for events from your customers' directory providers (e.g., user
  updates, group changes)
- Use **REST APIs** to manage users, groups, and directories on demand

<figure className="width-75">
  ![](@site/docs/scim/assets/1-quickstart-scim.png)
  <figcaption></figcaption>
</figure>

Scalekit enables you to sync user accounts with the latest data in the directory provider. This
allows you to:

- Create accounts for new hires during onboarding
- Deactivate accounts when employees depart
- Adjust access levels as employees change roles

## User Provisioning with Scalekit's Directory API

Scalekit's Directory API allows you to fetch information about users, groups, and directories
associated with an organization on-demand. This is useful for scenarios like running cron jobs to
sync user and group data. In this guide, we'll demonstrate how to use the List Users in a Directory
API to retrieve a list of users in a specific directory.

Before you begin, ensure that your organization has a directory set up in Scalekit.

Before diving in, ensure you have:

1. A Scalekit account
2. An organization with a configured directory in Scalekit (or use the default _Test Organization_)
3. Access to the Scalekit Dashboard

#### Setting Up the SDK

Scalekit offers language-specific SDKs for fast SSO integration. Use the installation instructions
below for your technology stack:

<InstallSDK />

Navigate to the API Config tab in the Scalekit Dashboard to obtain your credentials. Store your
credentials securely in a <SimpleCode>.env</SimpleCode> file:

<CodeWithHeader title=".env">

```shellscript
SCALEKIT_ENVIRONMENT_URL='https://b2b-app-dev.scalekit.com'
SCALEKIT_CLIENT_ID='<CLIENT_ID_FROM_SCALEKIT_DASHBOARD>'
SCALEKIT_CLIENT_SECRET='<SECRET_FROM_SCALEKIT_DASHBOARD>'
```

</CodeWithHeader>

Initialize the SDK with your API credentials and make your first API call to list organizations.

<CodeWithHeader title="Make your first SDK call">
<Tabs groupId="tech-stack" queryString>
<TabItem value="curl" label="cURL">

```bash
curl -L 'https://$ENV_URL/api/v1/organizations?page_size=5' \
-H 'Authorization: Bearer <ACCESS_TOKEN>'
```

</TabItem>

<TabItem value="nodejs" label="Node.js">

```javascript
import { ScalekitClient } from '@scalekit-sdk/node';

const scalekit = new ScalekitClient(
  process.env.SCALEKIT_ENVIRONMENT_URL,
  process.env.SCALEKIT_CLIENT_ID,
  process.env.SCALEKIT_CLIENT_SECRET,
);

const { organizations } = await scalekit.organization.listOrganization({
  pageSize: 10,
});

console.log(`Name of the a organization: ${organizations[0].display_name}`);
```

</TabItem>

<TabItem value="python" label="Python">

```python
from scalekit import ScalekitClient

# Initialize the SDK client
scalekit_client = ScalekitClient(
  '<SCALEKIT_ENVIRONMENT_URL>',
  '<SCALEKIT_CLIENT_ID>',
  '<SCALEKIT_CLIENT_SECRET>'
)

org_list = (scalekit_client
            .organization
            .list_organizations(page_size='100'))

print(f'Organisation details: {org_list[0]}')

```

</TabItem>

<TabItem value="go" label="Go" >

```go
sc := scalekit.NewScalekitClient(
  <SCALEKIT_ENVIRONMENT_URL>,
  <SCALEKIT_CLIENT_ID>,
  <SCALEKIT_CLIENT_SECRET>
)

organization, err := sc.Organization.GetOrganization(
  ctx,
  organizationId
)
```

</TabItem>

<TabItem value="java" label="Java">

```java
import com.scalekit.ScalekitClient;

ScalekitClient scalekitClient = new ScalekitClient(
  "<SCALEKIT_ENVIRONMENT_URL>",
  "<SCALEKIT_CLIENT_ID>",
  "<SCALEKIT_CLIENT_SECRET>"
);

CreateOrganization createOrganization = CreateOrganization.newBuilder()
  .setDisplayName("Test organization")
  .build();

Organization organization = client.organizations().create(createOrganization);

```

</TabItem>
</Tabs>
</CodeWithHeader>
<CodeWithHeader title="Terminal Output">

```console
Name of the a organization: AcmeCorp
```

</CodeWithHeader>

## Working with Directories

### Retrieving a Directory

To begin syncing user and group data, first retrieve the directory associated with your
organization:

<CodeWithHeader title="Retrieve a Directory">
<Tabs groupId="tech-stack" queryString>
<TabItem value="nodejs" label="Node.js">

```javascript
async function getDirectory(organizationId) {
  const { directory } = await scalekit.directory.getDirectory(organizationId);
  console.log('Directory ID:', directory.id);
  return directory;
}

const organizationId = 'org_33247113199762954';
const directory = await getDirectory(organizationId);
```

</TabItem>

<TabItem value="python" label="Python">

```python
from scalekit import ScalekitClient

# Initialize the SDK client
scalekit_client = ScalekitClient(
  '<SCALEKIT_ENVIRONMENT_URL>',
  '<SCALEKIT_CLIENT_ID>',
  '<SCALEKIT_CLIENT_SECRET>'
)

directory = scalekit_client.directory.get_directory(
  directory_id='<directory_id>', organization_id='<organization_id>'
)
print(f'Directory details: {directory}')

```

</TabItem>

<TabItem value="go" label="Go">

```go
sc := scalekit.NewScalekitClient(
  <SCALEKIT_ENVIRONMENT_URL>,
  <SCALEKIT_CLIENT_ID>,
  <SCALEKIT_CLIENT_SECRET>
)

directory, err := sc.Directory().GetDirectory(ctx, organizationId, directoryId)

```

</TabItem>

<TabItem value="java" label="Java">

```java
import com.scalekit.ScalekitClient;

ScalekitClient scalekitClient = new ScalekitClient(
  "<SCALEKIT_ENVIRONMENT_URL>",
  "<SCALEKIT_CLIENT_ID>",
  "<SCALEKIT_CLIENT_SECRET>"
);

Directory directory = client.directories().getDirectory(directoryId, organizationId);

```

</TabItem>
</Tabs>
</CodeWithHeader>

<CodeWithHeader title="Terminal Output">

```
Directory ID: dir_33247113199762954
```

</CodeWithHeader>

### Listing Users in a Directory

Fetch users within a specific directory:

<CodeWithHeader title="List Users in a Directory">
<Tabs groupId="tech-stack" queryString>
<TabItem value="nodejs" label="Node.js">

```javascript
async function listUsers(directoryId) {
  const { users } = await scalekit.directory.listDirectoryUsers(directoryId);
  console.log('User email in the directory:', users[0].email);
  return users;
}

const userList = await listUsers(directory.id);
```

</TabItem>

<TabItem value="python" label="Python">

```python
from scalekit import ScalekitClient

# Initialize the SDK client
scalekit_client = ScalekitClient(
  '<SCALEKIT_ENVIRONMENT_URL>',
  '<SCALEKIT_CLIENT_ID>',
  '<SCALEKIT_CLIENT_SECRET>'
)

directory_users = scalekit_client.directory.list_directory_users(
  directory_id='<directory_id>', organization_id='<organization_id>'
)
print(f'directory users: {str(directory_users)}')

```

</TabItem>

<TabItem value="go" label="Go">

```go
sc := scalekit.NewScalekitClient(
  <SCALEKIT_ENVIRONMENT_URL>,
  <SCALEKIT_CLIENT_ID>,
  <SCALEKIT_CLIENT_SECRET>
)

options := &ListDirectoryUsersOptions{
		PageSize: 10,
		PageToken: "",
}
directoryUsers,err := sc.Directory().ListDirectoryUsers(ctx, organizationId, directoryId, options)

```

</TabItem>

<TabItem value="java" label="Java">

```java
import com.scalekit.ScalekitClient;

ScalekitClient scalekitClient = new ScalekitClient(
  "<SCALEKIT_ENVIRONMENT_URL>",
  "<SCALEKIT_CLIENT_ID>",
  "<SCALEKIT_CLIENT_SECRET>"
);

var options = ListDirectoryResourceOptions.builder()
  .pageSize(10)
  .pageToken("")
  .includeDetail(true)
  .build();

ListDirectoryUsersResponse usersResponse = client
  .directories()
  .listDirectoryUsers(directory.getId(), organizationId, options);

```

</TabItem>
</Tabs>
</CodeWithHeader>

<CodeWithHeader title="Terminal Output">

```
User email in the directory: jerry@acmecorp.com
```

</CodeWithHeader>

**Example Use Case**:Â When setting up a new customer account, you can use this function to
automatically connect to their directory and start syncing user data.

See [Directory User Object](/scim/directory-user-object)

### Listing Groups

Retrieve groups within a directory:

<CodeWithHeader title="List Groups in a Directory">
<Tabs groupId="tech-stack" queryString>
<TabItem value="nodejs" label="Node.js">

```javascript
async function listGroups(directoryId) {
  const { groups } = await scalekit.directory.listDirectoryGroups(directoryId);
  console.log('Group Object: \n', JSON.stringify(groups[0], null, 2));
  return groups;
}

const groups = await listGroups(directory.id);
```

</TabItem>

<TabItem value="python" label="Python">

```python

from scalekit import ScalekitClient

# Initialize the SDK client
scalekit_client = ScalekitClient(
  '<SCALEKIT_ENVIRONMENT_URL>',
  '<SCALEKIT_CLIENT_ID>',
  '<SCALEKIT_CLIENT_SECRET>'
)

directory_groups = scalekit_client.directory.list_directory_groups(
  directory_id='<directory_id>', organization_id='<organization_id>'
)
print(f'directory groups: {str(directory_groups)}')

```

</TabItem>

<TabItem value="go" label="Go">

```go
sc := scalekit.NewScalekitClient(
  <SCALEKIT_ENVIRONMENT_URL>,
  <SCALEKIT_CLIENT_ID>,
  <SCALEKIT_CLIENT_SECRET>
)
options := &ListDirectoryGroupsOptions{
		PageSize: 10,
		PageToken:"",
	}

directoryGroups, err := sc.Directory().ListDirectoryGroups(ctx, organizationId, directoryId, options)
```

</TabItem>

<TabItem value="java" label="Java">

```java
import com.scalekit.ScalekitClient;

ScalekitClient scalekitClient = new ScalekitClient(
  "<SCALEKIT_ENVIRONMENT_URL>",
  "<SCALEKIT_CLIENT_ID>",
  "<SCALEKIT_CLIENT_SECRET>"
);

var options = ListDirectoryResourceOptions.builder()
  .pageSize(10)
  .pageToken("")
  .includeDetail(true)
  .build();

ListDirectoryGroupsResponse groupsResponse = client
  .directories()
  .listDirectoryGroups(directory.getId(), organizationId, options);

```

</TabItem>
</Tabs>
</CodeWithHeader>

<CodeWithHeader title="Terminal Output">

```
Group Object:
{
  "id": "dirgroup_38074475882742351",
  "display_name": "Skyflow Users",
  "total_users": 2
}
```

</CodeWithHeader>

**Example Use Case**:Â You can use this function to implement role-based access control in your
application, assigning permissions based on the groups a user belongs to.

Scalekit's Directory API provides a simple way to fetch user and group information on-demand. Refer
to our [API reference](/apis) and [examples](/scalekit-by-example/scalekit-by-example) to explore
more capabilities.

## Realtime User Provisioning with Webhooks

### Create a Webhook Endpoint

To receive realtime events from directory providers, create a webhook endpoint and register it in
the Scalekit dashboard.

<Tabs groupId="tech-stack" queryString>
<TabItem value="nextjs" label="Next.js">

```javascript showLineNumbers
import { NextRequest, NextResponse } from 'next/server';

/**
 * Webhook Endpoint using Next.js App Router v14.2
 * @endpoint /api/webhook/user-access
 * app/api
 * âââ webhook
 *     âââ user-access
 *         âââ route.ts
 */

export async function POST(req: NextRequest) {
  // Parse the JSON body of the request
  const event = await req.json();

  // Destructure to get necessary data from the event
  const { email, name } = event.data;

  // Call a function to perform business logic
  await createUserAccount(email, name);

  // Return a JSON response with a status code of 201
  return NextResponse.json({ message: "User account created" }, { status: 201 });
}
```

</TabItem>

<TabItem value="nodejs" label="Node.js">

```javascript

```

</TabItem>

<TabItem value="python" label="Python">

```python

```

</TabItem>

<TabItem value="go" label="Go">

```go

```

</TabItem>

<TabItem value="java" label="Java">

```java

```

</TabItem>
</Tabs>

{/* prettier-ignore */}
In this example, the endpoint URL is<SimpleCode>https://<span></span>www<span></span>.hero-saas.<span></span>app/api/webhook/user-access</SimpleCode>

When the endpoint receives an HTTP POST request with event data, it extracts the name and email from
the payload and calls <SimpleCode>createUserAccount()</SimpleCode> to perform the necessary business
logic â in this case, creating a user account.

### Register Webhook Endpoint

First, navigate to the "Webhooks" tab in the Scalekit Dashboard. Click on the "+Add Endpoint" button
and enter the endpoint URL along with a meaningful description. Finally, select the desired event
types, such as <SimpleCode>scalekit.dir.user.\*</SimpleCode>, to subscribe to the relevant events.

<figure className="width-75">![](@site/docs/scim/assets/2-quickstart-dir-sync.png)</figure>

Click "Create." Once registered, the webhook endpoint will start receiving event payloads from the
directory providers.

Refer to the [API reference](/apis#tag/Webhooks) for the list of all available event types and
[setting up webhooks](scim/webhooks.mdx) to explore testing webhooks with test endpoints.

### Receive Event Payloads

Scalekit sends event payloads to your app for consumption and standardizes the payload structure
across different directory providers your customers may use.Since we subscribed to user events,
let's log an example of a new hire gaining access to your app when Scalekit sends a user creation
event.

<CodeWithHeader>
<Tabs groupId="tech-stack" queryString>
<TabItem value="nextjs" label="Next.js">

```javascript showLineNumbers
const event = await req.json();
// Business logic with Event Object
console.log(`Event Type: ${event.type}`);
console.log(`${event.data.given_name}'s account is provisioned`);
```

</TabItem>

<TabItem value="nodejs" label="Node.js">

```javascript showLineNumbers
const event = await req.json();
// Business logic with Event Object
console.log(`Event Type: ${event.type}`);
console.log(`${event.data.given_name}'s account is provisioned`);
```

</TabItem>

<TabItem value="python" label="Python">

```python

```

</TabItem>

<TabItem value="go" label="Go">

```go

```

</TabItem>

<TabItem value="java" label="Java">

```java

```

</TabItem>
</Tabs>
</CodeWithHeader>

<CodeWithHeader title="Terminal Output">

```console
Event Type: scalekit.dir.user.create
Santhosh's account is provisioned
```

</CodeWithHeader>

You have now successfully created and registered a webhook endpoint, allowing your app to receive
real-time events to automate user provisioning.
