"use strict";(self.webpackChunkscalekit_docs=self.webpackChunkscalekit_docs||[]).push([[7530],{9949:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>n,metadata:()=>a,toc:()=>h});var o=s(4848),t=s(8453);const n={},r="Webhooks",a={id:"dir-sync/bkp/webhooks",title:"Webhooks",description:"Webhooks are powerful tools that allow your application to receive real-time notifications about specific occurrences within the ScaleKit system. Events represent specific actions or changes, while webhooks are the mechanism used to deliver these event notifications to your specified endpoint.",source:"@site/docs/dir-sync/bkp/webhooks.mdx",sourceDirName:"dir-sync/bkp",slug:"/dir-sync/bkp/webhooks",permalink:"/docs-staging/dir-sync/bkp/webhooks",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},c={},h=[{value:"Webhook Security",id:"webhook-security",level:2},{value:"Webhook Signature verification",id:"webhook-signature-verification",level:3},{value:"Webhook Timestamp verification",id:"webhook-timestamp-verification",level:3}];function l(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",span:"span",...(0,t.R)(),...e.components},{CodeWithHeader:s,TabItem:n,Tabs:r}=i;return s||k("CodeWithHeader",!0),n||k("TabItem",!0),r||k("Tabs",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,o.jsx)(i.p,{children:"Webhooks are powerful tools that allow your application to receive real-time notifications about specific occurrences within the ScaleKit system. Events represent specific actions or changes, while webhooks are the mechanism used to deliver these event notifications to your specified endpoint."}),"\n",(0,o.jsx)(i.p,{children:"By leveraging webhooks, you can build responsive and dynamic integrations that react immediately to changes in your directory sync data, enabling you to keep your systems in sync and automate user provisioning and deprovisioning."}),"\n",(0,o.jsx)(i.h2,{id:"webhook-security",children:"Webhook Security"}),"\n",(0,o.jsx)(i.p,{children:"While webhooks are a powerful tool for receiving real-time updates, it's important to ensure that you always verify if the incoming webhooks is indeed coming from Scalekit and not from a malicious actor."}),"\n",(0,o.jsx)(i.p,{children:"There are typically two types of webhook security mechanisms that you can use to ensure the authenticity and integrity of the incoming webhook."}),"\n",(0,o.jsx)(i.h3,{id:"webhook-signature-verification",children:"Webhook Signature verification"}),"\n",(0,o.jsx)(i.p,{children:'Every incoming webhook is signed with a secret key. This secret key is available in the Scalekit Dashboard under the "Webhooks" section.'}),"\n","\n",(0,o.jsxs)(i.p,{children:["A cryptographic hash is generated for the payload containing webhook id, webhook body and the timestamp with the webhook secret as a key using the HMAC-SHA256 algorithm. This signature is then sent as part of the ",(0,o.jsx)(i.code,{children:"svix-signature"})," header. You can use the following code to locally compute the signature and verify the webhook signature if it matches with the one sent by Scalekit:"]}),"\n",(0,o.jsx)(s,{title:"Webhook Signature Verification",children:(0,o.jsxs)(r,{children:[(0,o.jsx)(n,{label:"Node.js",value:"Node.js",children:(0,o.jsx)(i.pre,{className:"shiki shiki-themes one-light github-dark",style:{backgroundColor:"#FAFAFA","--shiki-dark-bg":"#24292e",color:"#383A42","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:(0,o.jsxs)(i.code,{className:"language-javascript",children:[(0,o.jsx)(i.span,{className:"line",children:(0,o.jsx)(i.span,{style:{color:"#A0A1A7","--shiki-dark":"#6A737D",fontStyle:"italic","--shiki-dark-font-style":"inherit"},children:"// Work in progress"})}),"\n",(0,o.jsx)(i.span,{className:"line"})]})})}),(0,o.jsx)(n,{label:"Python",value:"Python",children:(0,o.jsx)(i.pre,{className:"shiki shiki-themes one-light github-dark",style:{backgroundColor:"#FAFAFA","--shiki-dark-bg":"#24292e",color:"#383A42","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:(0,o.jsxs)(i.code,{className:"language-python",children:[(0,o.jsxs)(i.span,{className:"line",children:[(0,o.jsx)(i.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"import"}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" hmac"})]}),"\n",(0,o.jsxs)(i.span,{className:"line",children:[(0,o.jsx)(i.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"import"}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" hashlib"})]}),"\n",(0,o.jsx)(i.span,{className:"line"}),"\n",(0,o.jsxs)(i.span,{className:"line",children:[(0,o.jsx)(i.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"def"}),(0,o.jsx)(i.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:" verify_webhook_signature"}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"("}),(0,o.jsx)(i.span,{style:{color:"#986801","--shiki-dark":"#E1E4E8"},children:"webhook_body"}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","}),(0,o.jsx)(i.span,{style:{color:"#986801","--shiki-dark":"#E1E4E8"},children:" signature"}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","}),(0,o.jsx)(i.span,{style:{color:"#986801","--shiki-dark":"#E1E4E8"},children:" secret_key"}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"):"})]}),"\n",(0,o.jsxs)(i.span,{className:"line",children:[(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"    computed_signature "}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#F97583"},children:"="}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" hmac.new(secret_key.encode(), webhook_body, hashlib.sha256).hexdigest()"})]}),"\n",(0,o.jsxs)(i.span,{className:"line",children:[(0,o.jsx)(i.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"    return"}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" computed_signature "}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#F97583"},children:"=="}),(0,o.jsx)(i.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" signature"})]}),"\n",(0,o.jsx)(i.span,{className:"line"})]})})})]})}),"\n",(0,o.jsx)(i.h3,{id:"webhook-timestamp-verification",children:"Webhook Timestamp verification"}),"\n",(0,o.jsx)(i.p,{children:"Even though the webhook signature verification is enough to ensure that the incoming webhook is indeed coming from Scalekit and not from a malicious actor, we also recommend that you verify the webhook timestamp to ensure that the webhook is not stale or just replayed after sometime."}),"\n",(0,o.jsx)(i.p,{children:"To mitigate the risk of replay attacks, we recommend that you verify the webhook timestamp and ensure that the webhook is within a tolerance window of 60 seconds. Our SDKs and libraries provide helper functions to verify the webhook timestamp automatically as part of the webhook signature verification process."}),"\n"]})}function d(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}function k(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,i,s)=>{s.d(i,{R:()=>r,x:()=>a});var o=s(6540);const t={},n=o.createContext(t);function r(e){const i=o.useContext(n);return o.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(n.Provider,{value:i},e.children)}}}]);