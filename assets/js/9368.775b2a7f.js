"use strict";(self.webpackChunkscalekit_docs=self.webpackChunkscalekit_docs||[]).push([[9368],{8478:(e,t,n)=>{n.d(t,{A:()=>a});n(6540);var r=n(2303),o=n(4848);function a(e){let{children:t,fallback:n}=e;return(0,r.A)()?(0,o.jsx)(o.Fragment,{children:t?.()}):n??null}},3413:(e,t,n)=>{n.d(t,{iN:()=>me});var r=n(4848),o=n(6540);const a=(e,t,n,r,o)=>{if(!r)throw new Error(null!=o?o:`Invalid property path: ${t}\nCouldn't access "${n}" in ${JSON.stringify(e)}`)},i=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),s=e=>Array.isArray(e),l=(e,t)=>e.filter(((e,n)=>n!==t)),c=(e,t,n,r={})=>{const{remove:o=!1,createNew:a=!0,noError:i=!1}=r,c=e,u="string"==typeof(p=t)?p:"number"==typeof p?String(p):p.reduce(((e,t)=>"number"==typeof t?`${e}[${t}]`:""===e?t:`${e}.${t}`),"");var p;const g=Object.assign(Object.assign({},r),{remove:o,createNew:a,noError:i,fullData:c,fullPath:u}),m=Array.isArray(t)?t:(e=>Array.isArray(e)?e:e.split(/(\.|\[\d+\])/).filter((e=>"."!==e&&""!==e)).map((e=>{const t=/\[(\d+)\]/.exec(e);return t?Number(t[1]):e})).flat())(t).filter((e=>""!==e));return s(e)&&o&&1===m.length?l(e,m[0]):d(e,m,n,g)},d=(e,t,n,r)=>{const o=i(e)?Object.assign({},e):null,c=s(e)?[...e]:null;if(0===t.length)return e;if(!o&&!c)throw new Error("Can't assign property -- invalid input object");const{createNew:g,remove:m,noError:h,fullData:y,fullPath:f}=r,j=t[0];if(c&&"string"==typeof j)return c.map((e=>d(e,t,n,r)));if(1===t.length){if(o&&"string"==typeof j){const e=u(o,j,n,r);return null!=e?e:o}return c&&"number"==typeof j?(p(c,j,n,r),c):(a(y,f,j,h),e)}const b=o||c||[];if(m&&2===t.length&&"number"==typeof t[1]){const e=b[j],n=t[1];return s(e)?b[j]=l(e,n):a(y,f,j,h,"Trying to remove an indexed item from an object that is not an array"),b}const v=t.slice(1);if(j in e){if(E=b[j],!s(E)&&!i(E)){if(!g)return a(y,f,j,h),b;b[j]={}}return b[j]=d(b[j],v,n,r),b}var E;if(g){const e="number"==typeof v[0]?[]:{};if(o)return b[j]=e,b[j]=d(b[j],v,n,r),b;if(c&&Array.isArray(b)){b.push(e);const t=b.length-1;return b[t]=d(b[t],v,n,r),b}}return a(y,f,j,h),b},u=(e,t,n,r)=>{const{remove:o,createNew:i,noError:s,insertAfter:l,insertBefore:c,fullData:d,fullPath:u}=r;if(c||l){const r=Object.entries(e);let o=r.findIndex((([e,t])=>e===(null!=c?c:l)));return l&&o++,r.splice(o,0,[t,n]),Object.fromEntries(r)}const p=t in e;o?p?delete e[t]:a(d,u,t,s):i||p?e[t]=n:a(d,u,t,s)},p=(e,t,n,r)=>{const{noError:o,fullData:i,fullPath:s,createNew:l,insert:c}=r;c&&e.splice(t,0,n),t in e?e[t]=n:l?e.push(n):a(i,s,t,o)},g=(e,t,n)=>{const r=Array.isArray(t)?t:m(t);if(0===r.length)return e;const o=r[0];if(Array.isArray(e)&&"number"!=typeof o)return e.map((e=>g(e,r,n)));if("object"!=typeof e||null===e||!(o in e))return h(e,o,n);const a=e[o];return 1===r.length?a:g(a,r.slice(1),n)},m=e=>e.split(/(\.|\[\d+\])/).filter((e=>"."!==e&&""!==e)).map((e=>{const t=/\[(\d+)\]/.exec(e);return t?Number(t[1]):e})).flat(),h=(e,t,n)=>{if(void 0===n)throw new Error(`Unable to extract object property\nLooking for property: ${t}\nIn object: ${JSON.stringify(e)}`);return n};function y(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const f=({className:e,name:t,value:n,setValue:o,handleKeyPress:a,styles:i})=>{if("string"!=typeof n)return null;const s="\n"===n.slice(-1)?n+".":n;return(0,r.jsxs)("div",{style:{display:"grid"},children:[(0,r.jsx)("textarea",{id:`${t}_textarea`,style:Object.assign({height:"auto",gridArea:"1 / 1 / 2 / 2",overflowY:"auto",whiteSpace:"pre-wrap"},i),rows:1,className:e,name:`${t}_textarea`,value:n,onChange:e=>o(e.target.value),autoFocus:!0,onFocus:e=>{n.length<40&&e.target.select()},onKeyDown:a}),(0,r.jsx)("span",{className:e,style:Object.assign({visibility:"hidden",height:"auto",gridArea:"1 / 1 / 2 / 2",color:"red",opacity:.9,whiteSpace:"pre-wrap",overflowY:"auto",border:"1px solid transparent"},i),children:s})]})},j=e=>null!==e&&"object"==typeof e,b=(e,t,n,r="")=>{if(!n&&!r)return!0;switch(e){case"collection":if(n){if(n(t,r))return!0;if(!v(r,t,n))return!1}if(!n&&r&&!v(r,t))return!1;break;case"value":if(n&&!n(t,r))return!1;if(!n&&r&&!E(t,r))return!1}return!0},v=(e="",t,n=E)=>{const r=t.value;return Object.entries(r).some((([o,a])=>{const i=[...t.path,o],s=Object.assign(Object.assign({},t),{key:o,path:i,level:t.level+1,value:a,size:i.length,parentData:r});return j(a)?v(e,s,n):n(s,e)}))},E=(e,t="")=>{const{value:n}=e;if(null===n&&"null".includes(t.toLowerCase()))return!0;switch(typeof n){case"string":return n.toLowerCase().includes(t.toLowerCase());case"number":return!!String(n).includes(t);case"boolean":return n?"true".includes(t.toLowerCase())||"1"===t:"false".includes(t.toLowerCase())||"0"===t;default:return!1}},x=({key:e,path:t},n="")=>!!E({value:e},n)||!!t.some((e=>E({value:e},n))),D=(e,t=200)=>"string"==typeof e?e.length<t?e:`${e.slice(0,t-2).trim()}...`:e,w=e=>e.map((e=>""===e?String.fromCharCode(0):e)).join("."),k={default:{displayName:"Default",fragments:{edit:"rgb(42, 161, 152)"},styles:{container:{backgroundColor:"#f6f6f6",fontFamily:"monospace"},collection:{},collectionInner:{},collectionElement:{},dropZone:{},property:"#292929",bracket:{color:"rgb(0, 43, 54)",fontWeight:"bold"},itemCount:{color:"rgba(0, 0, 0, 0.3)",fontStyle:"italic"},string:"rgb(203, 75, 22)",number:"rgb(38, 139, 210)",boolean:"green",null:{color:"rgb(220, 50, 47)",fontVariant:"small-caps",fontWeight:"bold"},input:["#292929"],inputHighlight:"#b3d8ff",error:{fontSize:"0.8em",color:"red",fontWeight:"bold"},iconCollection:"rgb(0, 43, 54)",iconEdit:"edit",iconDelete:"rgb(203, 75, 22)",iconAdd:"edit",iconCopy:"rgb(38, 139, 210)",iconOk:"green",iconCancel:"rgb(203, 75, 22)"}},githubDark:{displayName:"Github Dark",styles:{container:{backgroundColor:"#0d1117",color:"white"},dropZone:"rgba(165, 214, 255, 0.17)",property:"#E6EDF3",bracket:"#56d364",itemCount:"#8B949E",string:"#A5D6FF",number:"#D2A8FF",boolean:{color:"#FF7B72",fontSize:"90%",fontWeight:"bold"},null:"green",iconCollection:"#D2A8FF",iconEdit:"#D2A8FF",iconDelete:"rgb(203, 75, 22)",iconAdd:"rgb(203, 75, 22)",iconCopy:"#A5D6FF",iconOk:"#56d364",iconCancel:"rgb(203, 75, 22)"}},githubLight:{displayName:"Github Light",styles:{container:"white",property:"#1F2328",bracket:"#00802e",itemCount:"#8B949E",string:"#0A3069",number:"#953800",boolean:{color:"#CF222E",fontSize:"90%",fontWeight:"bold"},null:"#FF7B72",iconCollection:"#8250DF",iconEdit:"#8250DF",iconDelete:"rgb(203, 75, 22)",iconAdd:"#8250DF",iconCopy:"#57606A"}},monoDark:{displayName:"Black & White",fragments:{lightText:{color:"white"},midGrey:"#5c5c5c"},styles:{container:["lightText",{backgroundColor:"black"}],dropZone:"#e0e0e029",property:"lightText",bracket:"midGrey",itemCount:"#4a4a4a",string:"#a8a8a8",number:"#666666",boolean:{color:"#848484",fontStyle:"italic"},null:"#333333",iconCollection:"midGrey",iconEdit:"midGrey",iconDelete:"midGrey",iconAdd:"midGrey",iconCopy:"midGrey",iconOk:"midGrey",iconCancel:"midGrey"}},monoLight:{fragments:{midGrey:"#a3a3a3"},displayName:"White & Black",styles:{container:"white",property:"black",bracket:"midGrey",itemCount:"#b5b5b5",string:"#575757",number:"#999999",boolean:{color:"#7b7b7b",fontStyle:"italic"},null:"#cccccc",iconCollection:"midGrey",iconEdit:"midGrey",iconDelete:"midGrey",iconAdd:"midGrey",iconCopy:"midGrey",iconOk:"midGrey",iconCancel:"midGrey"}},candyWrapper:{displayName:"Candy Wrapper",fragments:{minty:{backgroundColor:"#F1FAEE"},pale:{color:"#A8DADC"},mid:{color:"#457B9D"},dark:{color:"#1D3557"},pop:{color:"#E63946"},darkBlue:{color:"#2B2D42"}},styles:{container:"minty",property:"pop",dropZone:"#eb121217",bracket:"dark",itemCount:"pale",string:"mid",number:["darkBlue",{fontSize:"85%"}],boolean:["mid",{fontStyle:"italic",fontWeight:"bold",fontSize:"80%"}],null:["#cccccc",{fontWeight:"bold"}],input:{border:"1px solid rgb(115, 194, 198)"},iconCollection:"#1D3557",iconEdit:"#457B9D",iconDelete:"#E63946",iconAdd:"#2B2D42",iconCopy:"#1D3557",iconCancel:"#E63946"}},psychedelic:{displayName:"Psychedelic",fragments:{pale:{color:"#A8DADC"},fluroYellow:"rgb(242, 228, 21)",fluroGreen:"rgb(68, 255, 62)",hotPink:"#f7379a"},styles:{container:{backgroundColor:"unset",background:"linear-gradient(90deg, hsla(333, 100%, 53%, 1) 0%, hsla(33, 94%, 57%, 1) 100%)",color:"black"},dropZone:"fluroYellow",property:"black",bracket:"fluroYellow",itemCount:["pale",{opacity:.7}],string:"white",number:["#33d9ff",{fontSize:"90%",fontWeight:"bold"}],boolean:["fluroGreen",{fontWeight:"bold",fontSize:"80%"}],null:["black",{fontWeight:"bold",opacity:.3,backgroundColor:"rgb(255, 255, 255, 0.5)",padding:"0 0.4em",borderRadius:"0.4em"}],iconCollection:"fluroYellow",iconEdit:["black"],iconDelete:["white",{opacity:.5}],iconAdd:["white",{opacity:.5}],iconCopy:"rgb(32, 84, 242)",iconOk:"fluroGreen",iconCancel:"hotPink"}}},C=k.default,S=(0,o.createContext)({getStyles:()=>({}),icons:{}}),O=({theme:e="default",icons:t={},children:n})=>{const o=A(e);return(0,r.jsx)(S.Provider,{value:{getStyles:(e,t)=>"function"==typeof o[e]?o[e](t):o[e],icons:t},children:n})},N=()=>(0,o.useContext)(S),A=e=>{var t,n,r,o;const a={},i=(Array.isArray(e)?e:[e]).map((t=>"default"===e?{}:"string"==typeof t?T(k[t],a):P(t)?T({fragments:{},styles:t},a):T(t,a))),s=T(C,{});Object.keys(s).forEach((e=>{const t=e;i.forEach((e=>{e[t]&&(s[t]=Object.assign(Object.assign({},s[t]),e[t]))}))}));const l=Object.assign({},s);return Object.entries(a).forEach((([e,t])=>{const n=e;l[n]=e=>{const r=t(e)||{};return Object.assign(Object.assign({},s[n]),r)}})),"function"!=typeof(null==l?void 0:l.inputHighlight)&&(null===(t=null==l?void 0:l.inputHighlight)||void 0===t?void 0:t.backgroundColor)&&document.documentElement.style.setProperty("--jer-highlight-color",null===(n=null==l?void 0:l.inputHighlight)||void 0===n?void 0:n.backgroundColor),"function"!=typeof(null==l?void 0:l.iconCopy)&&(null===(r=null==l?void 0:l.iconCopy)||void 0===r?void 0:r.color)&&document.documentElement.style.setProperty("--jer-icon-copy-color",null===(o=null==l?void 0:l.iconCopy)||void 0===o?void 0:o.color),l},T=(e,t)=>{const{fragments:n,styles:r}=e,o={};return Object.entries(r).forEach((([e,r])=>{const a=(Array.isArray(r)?r:[r]).reduce(((r,o)=>{var a;if("function"==typeof o)return t[e]=o,Object.assign({},r);if("string"==typeof o){const t=null!==(a=null==n?void 0:n[o])&&void 0!==a?a:o;return"string"==typeof t?Object.assign(Object.assign({},r),{[R[e]]:t}):Object.assign(Object.assign({},r),t)}return Object.assign(Object.assign({},r),o)}),{});o[e]=a})),o},P=e=>!("styles"in e),R={container:"backgroundColor",collection:"backgroundColor",collectionInner:"backgroundColor",collectionElement:"backgroundColor",dropZone:"borderColor",property:"color",bracket:"color",itemCount:"color",string:"color",number:"color",boolean:"color",null:"color",input:"color",inputHighlight:"backgroundColor",error:"color",iconCollection:"color",iconEdit:"color",iconDelete:"color",iconAdd:"color",iconCopy:"color",iconOk:"color",iconCancel:"color"},V="**INVALID_FUNCTION**",z=({value:e,setValue:t,isEditing:n,path:o,setIsEditing:a,handleEdit:i,handleCancel:s,stringTruncate:l,showStringQuotes:c,nodeData:d})=>{const{getStyles:u}=N(),p=w(o),g=c?'"':"";return n?(0,r.jsx)(f,{className:"jer-input-text",name:p,value:e,setValue:t,isEditing:n,handleKeyPress:e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&s():i()},styles:u("input",d)}):(0,r.jsxs)("div",{id:`${p}_display`,onDoubleClick:()=>a(!0),onClick:e=>{(e.getModifierState("Control")||e.getModifierState("Meta"))&&a(!0)},className:"jer-value-string",style:u("string",d),children:[g,D(e,l),g]})},F=({value:e,setValue:t,isEditing:n,path:o,setIsEditing:a,handleEdit:i,handleCancel:s,nodeData:l})=>{const{getStyles:c}=N();return n?(0,r.jsx)("input",{className:"jer-input-number",type:"text",name:w(o),value:e,onChange:e=>t(e.target.value.replace(/[^0-9.-]/g,"")),autoFocus:!0,onFocus:e=>e.target.select(),onKeyDown:n=>{switch(n.key){case"Enter":i();break;case"Escape":s();break;case"ArrowUp":n.preventDefault(),t(Number(e)+1);break;case"ArrowDown":n.preventDefault(),t(Number(e)-1)}},style:Object.assign({width:String(e).length/1.5+2+"em"},c("input",l))}):(0,r.jsx)("span",{onDoubleClick:()=>a(!0),className:"jer-value-number",style:c("number",l),children:e})},M=({value:e,setValue:t,isEditing:n,path:o,setIsEditing:a,handleEdit:i,handleCancel:s,nodeData:l})=>{const{getStyles:c}=N();return n?(0,r.jsx)("input",{className:"jer-input-boolean",type:"checkbox",name:w(o),checked:e,onChange:()=>t(!e),onKeyDown:e=>{"Enter"===e.key?i():"Escape"===e.key&&s()},autoFocus:!0}):(0,r.jsx)("span",{onDoubleClick:()=>a(!0),className:"jer-value-boolean",style:c("boolean",l),children:String(e)})},_=({value:e,isEditing:t,setIsEditing:n,handleEdit:a,handleCancel:i,nodeData:s})=>{const{getStyles:l}=N();(0,o.useEffect)((()=>(t&&document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c))),[t]);const c=e=>{"Enter"===e.key?a():"Escape"===e.key&&i()};return(0,r.jsx)("div",{onDoubleClick:()=>n(!0),className:"jer-value-null",style:l("null",s),children:String(e)})},I=({value:e})=>{let t="Error!";switch(typeof e){case"string":e===V&&(t="Function");break;case"undefined":t="Undefined";break;case"symbol":t="Symbol"}return(0,r.jsx)("span",{className:"jer-value-invalid",children:t})},L=({size:e,style:t,className:n})=>(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:n,style:t,children:[(0,r.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4z"}),(0,r.jsx)("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"})]}),K=({size:e,style:t,className:n})=>(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:n,style:t,transform:"translate(0, 0.5)",children:[(0,r.jsx)("path",{d:"M7 17.013l4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z"}),(0,r.jsx)("path",{d:"M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z"})]}),B=({size:e,style:t,className:n})=>(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:n,style:t,children:(0,r.jsx)("path",{d:"M6 19a2 2 0 002 2h8a2 2 0 002-2V7H6v12m2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12M15.5 4l-1-1h-5l-1 1H5v2h14V4h-3.5z"})}),W=({size:e,style:t,className:n})=>(0,r.jsxs)("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:e,height:e,className:n,style:t,children:[(0,r.jsx)("path",{d:"M9 2 H15 A1 1 0 0 1 16 3 V5 A1 1 0 0 1 15 6 H9 A1 1 0 0 1 8 5 V3 A1 1 0 0 1 9 2 z"}),(0,r.jsx)("path",{d:"M8 4H6a2 2 0 00-2 2v14a2 2 0 002 2h12a2 2 0 002-2v-2M16 4h2a2 2 0 012 2v4M21 14H11"}),(0,r.jsx)("path",{d:"M15 10l-4 4 4 4"})]}),G=({size:e,style:t,className:n})=>(0,r.jsxs)("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:e,height:e,className:n,style:t,children:[(0,r.jsx)("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),(0,r.jsx)("path",{d:"M22 4L12 14.01l-3-3"})]}),$=({size:e,style:t,className:n})=>(0,r.jsx)("svg",{baseProfile:"tiny",viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:n,style:t,children:(0,r.jsx)("path",{d:"M12 4c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm-5 8c0-.832.224-1.604.584-2.295l6.711 6.711A4.943 4.943 0 0112 17c-2.757 0-5-2.243-5-5zm9.416 2.295L9.705 7.584A4.943 4.943 0 0112 7c2.757 0 5 2.243 5 5 0 .832-.224 1.604-.584 2.295z"})}),H=({size:e,style:t,className:n})=>(0,r.jsx)("svg",{viewBox:"0 0 512 512",fill:"currentColor",width:e,height:e,className:n,style:t,children:(0,r.jsx)("path",{d:"M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"})}),U=({name:e,nodeData:t,rotate:n})=>{var o,a,i,s,l,c,d;const{getStyles:u,icons:p}=N(),g={size:"1.4em",className:"jer-icon"};switch(e){case"add":return null!==(o=null==p?void 0:p.add)&&void 0!==o?o:(0,r.jsx)(L,Object.assign({},g,{style:u("iconAdd",t)}));case"edit":return null!==(a=null==p?void 0:p.edit)&&void 0!==a?a:(0,r.jsx)(K,Object.assign({},g,{style:u("iconEdit",t)}));case"delete":return null!==(i=null==p?void 0:p.delete)&&void 0!==i?i:(0,r.jsx)(B,Object.assign({},g,{style:u("iconDelete",t),size:"1.45em"}));case"copy":return null!==(s=null==p?void 0:p.copy)&&void 0!==s?s:(0,r.jsx)(W,Object.assign({},g,{style:u("iconCopy",t),size:"1.2em"}));case"ok":return null!==(l=null==p?void 0:p.ok)&&void 0!==l?l:(0,r.jsx)(G,Object.assign({},g,{style:Object.assign({fontSize:"90%"},u("iconOk",t))}));case"cancel":return null!==(c=null==p?void 0:p.cancel)&&void 0!==c?c:(0,r.jsx)($,Object.assign({},g,{style:Object.assign({fontSize:"130%"},u("iconCancel",t))}));case"chevron":return null!==(d=null==p?void 0:p.chevron)&&void 0!==d?d:(0,r.jsx)(H,{size:"1em",style:u("iconCollection",t)});default:return(0,r.jsx)(r.Fragment,{})}},Y=({startEdit:e,handleDelete:t,handleAdd:n,enableClipboard:a,type:i,customButtons:s,nodeData:l,translate:c})=>{const{getStyles:d}=N(),u=c("KEY_NEW",l),[p,g]=(0,o.useState)(!1),[m,h]=(0,o.useState)(u),{key:y,path:f,value:j}=l;return(0,r.jsxs)("div",{className:"jer-edit-buttons",style:{opacity:p?1:void 0},children:[a&&(0,r.jsx)("div",{onClick:e=>{e.stopPropagation();let t,n="value",r="";a&&(!0===(e.ctrlKey||e.metaKey)?(t=X(f),r=t,n="path"):(t=j,r=i?JSON.stringify(j,null,2):String(t)),navigator.clipboard.writeText(r)),"function"==typeof a&&a({value:t,stringValue:r,path:f,key:y,type:n})},className:"jer-copy-pulse",children:(0,r.jsx)(U,{name:"copy",nodeData:l})}),e&&(0,r.jsx)("div",{onClick:t=>{t.stopPropagation(),e()},children:(0,r.jsx)(U,{name:"edit",nodeData:l})}),t&&(0,r.jsx)("div",{onClick:e=>{e.stopPropagation(),t()},children:(0,r.jsx)(U,{name:"delete",nodeData:l})}),n&&(0,r.jsx)("div",{onClick:e=>{e.stopPropagation(),"object"===i?g(!0):n("")},children:(0,r.jsx)(U,{name:"add",nodeData:l})}),null==s?void 0:s.map((({Element:e,onClick:t},n)=>(0,r.jsx)("div",{onClick:e=>t(l,e),children:(0,r.jsx)(e,{})},n))),p&&n&&"object"===i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{className:"jer-input-new-key",type:"text",name:"new-object-key",value:m,onChange:e=>h(e.target.value),autoFocus:!0,onFocus:e=>e.target.select(),onKeyDown:e=>{"Enter"===e.key&&n?(g(!1),n(m),h(u)):"Escape"===e.key&&(g(!1),h(u))},style:d("input",l)}),(0,r.jsx)(J,{onOk:e=>{m&&(e.stopPropagation(),g(!1),n(m))},onCancel:e=>{e.stopPropagation(),g(!1)},nodeData:l})]})]})},J=({onOk:e,onCancel:t,nodeData:n})=>(0,r.jsxs)("div",{className:"jer-confirm-buttons",children:[(0,r.jsx)("div",{onClick:e,children:(0,r.jsx)(U,{name:"ok",nodeData:n})}),(0,r.jsx)("div",{onClick:t,children:(0,r.jsx)(U,{name:"cancel",nodeData:n})})]}),X=e=>e.reduce(((e,t)=>"number"==typeof t?`${e}[${t}]`:""===e?t:`${e}.${t}`),""),Z=["string","number","boolean","null","object","array"],Q=(e=[],t)=>{const n=e.filter((({condition:e})=>e(t)));if(0===n.length)return{};const r=n[0],{element:o,wrapperElement:a,customNodeProps:i,wrapperProps:s,hideKey:l=!1,showEditTools:c=!0,showOnEdit:d=!1,showOnView:u=!0,showCollectionWrapper:p=!0}=r,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(r,["element","wrapperElement","customNodeProps","wrapperProps","hideKey","showEditTools","showOnEdit","showOnView","showCollectionWrapper"]);return Object.assign({CustomNode:o,CustomWrapper:a,customNodeProps:i,wrapperProps:s,hideKey:l,showEditTools:c,showOnEdit:d,showOnView:u,showCollectionWrapper:p},g)},q=(0,o.createContext)({collapseState:null,setCollapseState:()=>{},doesPathMatch:()=>!1,currentlyEditingElement:null,setCurrentlyEditingElement:()=>{},areChildrenBeingEdited:()=>!1,dragSource:{path:null,pathString:null},setDragSource:()=>{}}),ee=({children:e})=>{const[t,n]=(0,o.useState)(null),[a,i]=(0,o.useState)(null),[s,l]=(0,o.useState)({path:null,pathString:null});return(0,r.jsx)(q.Provider,{value:{collapseState:t,setCollapseState:e=>{n(e),null!==e&&setTimeout((()=>n(null)),2e3)},doesPathMatch:e=>{if(null===t)return!1;for(const[n,r]of t.path.entries())if(r!==e[n])return!1;return!0},currentlyEditingElement:a,setCurrentlyEditingElement:i,areChildrenBeingEdited:e=>null!==a&&a.includes(e),dragSource:s,setDragSource:l},children:e})},te=()=>(0,o.useContext)(q),ne=({props:e,collapsed:t})=>{const{data:n,nodeData:r,parentData:a,onEdit:i,onError:s,showErrorMessages:l,restrictEditFilter:c,restrictDeleteFilter:d,restrictAddFilter:u,restrictDragFilter:p,translate:g,errorMessageTimeout:m}=e,{currentlyEditingElement:h,setCurrentlyEditingElement:y}=te(),[f,j]=(0,o.useState)(null),b=Object.assign(Object.assign({},r),{collapsed:t}),{path:v,key:E,size:x}=b,D=w(v),k=(0,o.useMemo)((()=>!c(b)),[b]),C=(0,o.useMemo)((()=>!d(b)),[b]),S=(0,o.useMemo)((()=>!u(b)),[b]),O=(0,o.useMemo)((()=>!p(b)&&C&&null===h),[b]),N=e=>{l&&(j(e),setTimeout((()=>j(null)),m)),console.warn("Error",e)},A=(0,o.useMemo)((()=>(e,t)=>{N(e.message),s&&s({currentData:b.fullData,errorValue:t,currentValue:n,name:E,path:v,error:e})}),[s,l]),T=h===D,P=h===`key_${D}`,R="number"==typeof v.slice(-1)[0];return{pathString:D,nodeData:b,path:v,name:E,size:x,canEdit:k,canDelete:C,canAdd:S,canDrag:O,error:f,showError:N,onError:A,setError:j,handleEditKey:e=>{if(y(null),E===e)return;if(!a)return;const t=v.slice(0,-1);if(Object.keys(a).includes(e))return void A({code:"KEY_EXISTS",message:g("ERROR_KEY_EXISTS",b)},e);const n=Object.fromEntries(Object.entries(a).map((([t,n])=>t===E?[e,n]:[t,n])));i(n,t).then((t=>{t&&A({code:"UPDATE_ERROR",message:t},e)}))},derivedValues:{isEditing:T,isEditingKey:P,isArray:R,canEditKey:null!==a&&k&&S&&C&&!R}}},re=({canDrag:e,canDragOnto:t,path:n,nodeData:a,onMove:i,onError:s,translate:l})=>{const{getStyles:c}=N(),{dragSource:d,setDragSource:u}=te(),[p,g]=(0,o.useState)(!1),m=w(n),h=(0,o.useMemo)((()=>e?{onDragStart:e=>{e.stopPropagation(),u({path:n,pathString:m})},onDragEnd:e=>{e.stopPropagation(),u({path:null,pathString:null})}}:{}),[e]),y=(0,o.useMemo)((()=>e=>t?{onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDrop:t=>{t.stopPropagation(),j(e),u({path:null,pathString:null}),g(!1)},onDragEnter:t=>{var n;t.stopPropagation(),m.startsWith(null!==(n=d.pathString)&&void 0!==n?n:"")||g(e)},onDragExit:e=>{e.stopPropagation(),g(!1)}}:{}),[d,t]),f=(0,o.useMemo)((()=>t&&null!==d.pathString?(0,r.jsx)("div",Object.assign({className:"jer-drop-target-bottom",style:{height:"50%",position:"absolute",width:"100%",top:"50%",zIndex:n.length}},y("below"))):null),[d,t]),j=e=>{var t,r;const o=null===(t=d.path)||void 0===t?void 0:t.slice(-1)[0],c=null===(r=d.path)||void 0===r?void 0:r.slice(0,-1).join("."),u=n.slice(0,-1).join(""),{parentData:p}=a;"string"==typeof o&&p&&!Array.isArray(p)&&Object.keys(p).includes(o)&&o in p&&c!==u?s({code:"KEY_EXISTS",message:l("ERROR_KEY_EXISTS",a)},o):i(d.path,n,e).then((e=>{e&&s({code:"UPDATE_ERROR",message:e},a.value)}))};return{dragSourceProps:h,getDropTargetProps:y,BottomDropTarget:f,DropTargetPadding:({position:e,nodeData:t})=>p===e?(0,r.jsx)("div",{className:"jer-drag-n-drop-padding",style:c("dropZone",t)}):null,handleDrop:j}},oe=e=>{const{data:t,parentData:n,onEdit:a,onDelete:i,onChange:s,onMove:l,enableClipboard:c,canDragOnto:d,restrictTypeSelection:u,searchFilter:p,searchText:g,showLabel:m,stringTruncate:h,showStringQuotes:y,indent:f,translate:j,customNodeDefinitions:v}=e,{getStyles:E}=N(),{setCurrentlyEditingElement:x,setCollapseState:D}=te(),[w,k]=(0,o.useState)("function"==typeof t?V:t),{pathString:C,nodeData:S,path:O,name:A,canEdit:T,canDelete:P,canDrag:R,error:z,onError:F,handleEditKey:M,derivedValues:_}=ne({props:e}),{dragSourceProps:I,getDropTargetProps:L,BottomDropTarget:K,DropTargetPadding:B}=re({canDrag:R,canDragOnto:d,path:O,nodeData:S,onMove:l,onError:F,translate:j}),W=Q(v,S),[G,$]=(0,o.useState)(ae(t,W)),H=(0,o.useCallback)((e=>{if(!s)return void k(e);const t=s({currentData:S.fullData,newValue:e,currentValue:w,name:A,path:O});k(t)}),[s]);(0,o.useEffect)((()=>{k("function"==typeof t?V:t),$(ae(t,W))}),[t,z]);const{CustomNode:U,customNodeProps:X,hideKey:q,showEditTools:ee=!0,showOnEdit:oe,showOnView:le}=W,ce=[...Z,...v.filter((({showInTypesSelector:e=!1,name:t})=>e&&!!t)).map((({name:e})=>e))],de=(0,o.useMemo)((()=>{if("boolean"==typeof u)return u?[]:ce;if(Array.isArray(u))return u;const e=u(S);return"boolean"==typeof e?e?[]:ce:e}),[S,u]);if(!b("value",S,p,g))return null;const ue=()=>{let e;switch(x(null),G){case"object":e={[j("DEFAULT_NEW_KEY",S)]:w};break;case"array":e=null!=w?w:[];break;case"number":{const t=Number(w);e=isNaN(t)?0:t;break}default:e=w}a(e,O).then((t=>{t&&F({code:"UPDATE_ERROR",message:t},e)}))},pe=()=>{x(null),k(t),$(ae(t,W))},{isEditing:ge,isEditingKey:me,canEditKey:he}=_,ye=!ge&&z,fe=ge&&de.length>0,je="invalid"!==G&&!z&&ee,be=m&&me,ve=m&&!me&&!q,Ee={value:w,parentData:n,setValue:H,isEditing:ge,setIsEditing:T?()=>x(C):()=>{},handleEdit:ue,handleCancel:pe,path:O,stringTruncate:h,showStringQuotes:y,nodeData:S,translate:j},xe=U&&(ge&&oe||!ge&&le)?(0,r.jsx)(U,Object.assign({},e,{value:w,customNodeProps:X,setValue:H,handleEdit:ue,handleCancel:pe,handleKeyPress:e=>{"Enter"===e.key?ue():"Escape"===e.key&&pe()},isEditing:ge,setIsEditing:()=>x(C),getStyles:E})):ie(ae(t),Ee);return(0,r.jsxs)("div",Object.assign({className:"jer-component jer-value-component",style:{marginLeft:f/2+"em",position:"relative"},draggable:R},I,L("above"),{children:[K,(0,r.jsx)(B,{position:"above",nodeData:S}),(0,r.jsxs)("div",{className:"jer-value-main-row",style:{flexWrap:A.length>10?"wrap":"nowrap"},children:[ve&&(0,r.jsx)("span",{className:"jer-key-text",style:Object.assign(Object.assign({},E("property",S)),{minWidth:`${Math.min(String(A).length+1,5)}ch`,flexShrink:A.length>10?1:0}),onDoubleClick:()=>he&&x(`key_${C}`),children:""===A?(0,r.jsx)("span",{className:O.length>0?"jer-empty-string":void 0}):`${A}:`}),be&&(0,r.jsx)("input",{className:"jer-input-text jer-key-edit",type:"text",name:C,defaultValue:A,autoFocus:!0,onFocus:e=>e.target.select(),onKeyDown:e=>{"Enter"===e.key?M(e.target.value):"Escape"===e.key&&pe()},style:{width:String(A).length/1.5+.5+"em"}}),(0,r.jsxs)("div",{className:"jer-value-and-buttons",children:[(0,r.jsx)("div",{className:"jer-input-component",children:xe}),ge?(0,r.jsx)(J,{onOk:ue,onCancel:pe,nodeData:S}):je&&(0,r.jsx)(Y,{startEdit:T?()=>x(C):void 0,handleDelete:P?()=>{i(w,O).then((e=>{e&&F({code:"DELETE_ERROR",message:e},w)}))}:void 0,enableClipboard:c,translate:j,customButtons:e.customButtons,nodeData:S}),fe&&(0,r.jsxs)("div",{className:"jer-select",children:[(0,r.jsx)("select",{name:`${A}-type-select`,className:"jer-type-select",onChange:e=>(e=>{const t=v.find((t=>t.name===e));if(t)a(t.defaultValue,O),$(e),x(null),D({path:O,collapsed:!1});else{const t=se(w,e,j("DEFAULT_NEW_KEY",S),(null==W?void 0:W.CustomNode)?j("DEFAULT_STRING",S):void 0);H(t),a(t,O).then((e=>{e&&(F({code:"UPDATE_ERROR",message:e},t),x(null))}))}})(e.target.value),value:G,children:de.map((e=>(0,r.jsx)("option",{value:e,children:e},e)))}),(0,r.jsx)("span",{className:"focus"})]}),ye&&(0,r.jsx)("span",{className:"jer-error-slug",style:E("error",S),children:z})]})]}),(0,r.jsx)(B,{position:"below",nodeData:S})]}))},ae=(e,t)=>(null==t?void 0:t.CustomNode)&&(null==t?void 0:t.name)&&t.showInTypesSelector?t.name:"string"==typeof e?"string":"number"==typeof e?"number":"boolean"==typeof e?"boolean":null===e?"null":"invalid",ie=(e,t)=>{const n=t.value;switch(e){case"string":return(0,r.jsx)(z,Object.assign({},t,{value:n}));case"number":return(0,r.jsx)(F,Object.assign({},t,{value:n}));case"boolean":return(0,r.jsx)(M,Object.assign({},t,{value:n}));case"null":return(0,r.jsx)(_,Object.assign({},t));default:return(0,r.jsx)(I,Object.assign({},t))}},se=(e,t,n,r)=>{switch(t){case"string":return null!=r?r:String(e);case"number":{const t=Number(e);return isNaN(t)?0:t}case"boolean":return!!e;case"null":return null;case"object":return{[n]:e};case"array":return[e];default:return String(e)}},le=e=>{const{getStyles:t}=N(),{collapseState:n,setCollapseState:a,doesPathMatch:s,currentlyEditingElement:l,setCurrentlyEditingElement:c,areChildrenBeingEdited:d}=te(),{data:u,nodeData:p,parentData:m,showCollectionCount:h,onEdit:v,onAdd:E,onDelete:x,canDragOnto:D,collapseFilter:w,collapseAnimationTime:k,onMove:C,enableClipboard:S,searchFilter:O,searchText:A,indent:T,keySort:P,showArrayIndices:R,defaultValue:V,translate:z,customNodeDefinitions:F,jsonParse:M,jsonStringify:_}=e,[I,L]=(0,o.useState)(_(u)),K=w(p),{contentRef:B,isAnimating:W,maxHeight:G,collapsed:$,animateCollapse:H}=((e,t,n)=>{const[r,a]=(0,o.useState)(n?0:void 0),[i,s]=(0,o.useState)(n),l=(0,o.useRef)(!1),c=(0,o.useRef)(null),d=(0,o.useRef)(0),u=(0,o.useRef)();return{contentRef:c,isAnimating:l.current,animateCollapse:n=>{var r,o;if(i!==n){switch(window.clearTimeout(u.current),l.current=!0,n){case!0:{const e=null!==(o=null===(r=c.current)||void 0===r?void 0:r.offsetHeight)&&void 0!==o?o:0;d.current=e,a(e),setTimeout((()=>{a(0)}),5);break}case!1:a(d.current||((e,t)=>{var n,r;const o=document.getElementsByClassName("jer-editor-container"),a=parseInt(o.length>0?getComputedStyle(o[0]).getPropertyValue("line-height"):"16px"),i=(null!==(r=null===(n=t.current)||void 0===n?void 0:n.offsetWidth)&&void 0!==r?r:0)/(.5*a),s=JSON.stringify(e,null,2).replace(/\\n/g,"\n").split("\n").map((e=>Math.ceil(e.length/i))).reduce(((e,t)=>e+t),0)*a;return Math.min(s+30,window.innerHeight-50)})(e,c))}s(!i),u.current=window.setTimeout((()=>{l.current=!1,n||a(void 0)}),t)}},maxHeight:r,collapsed:i}})(u,k,K),{pathString:X,nodeData:Z,path:q,name:ee,size:ae,canEdit:ie,canDelete:se,canAdd:ce,canDrag:de,error:ue,setError:pe,onError:ge,handleEditKey:me,derivedValues:he}=ne({props:e,collapsed:$}),{dragSourceProps:ye,getDropTargetProps:fe,BottomDropTarget:je,DropTargetPadding:be}=re({canDrag:de,canDragOnto:D,path:q,nodeData:Z,onMove:C,onError:ge,translate:z}),ve=(0,o.useRef)(!K);(0,o.useEffect)((()=>{L(_(u))}),[u]),(0,o.useEffect)((()=>{const e=w(Z)&&!he.isEditing;ve.current=!e,H(e)}),[w]),(0,o.useEffect)((()=>{null!==n&&s(q)&&(ve.current=!0,H(n.collapsed))}),[n]);const Ee=(0,o.useMemo)((()=>e=>"function"!=typeof V?V:V(e)),[V]),{CustomNode:xe,customNodeProps:De,CustomWrapper:we,wrapperProps:ke={},hideKey:Ce,showEditTools:Se=!0,showOnEdit:Oe,showOnView:Ne,showCollectionWrapper:Ae=!0}=(0,o.useMemo)((()=>Q(F,Z)),[]);if(!b("collection",Z,O,A)&&Z.level>0)return null;const Te=Array.isArray(u)?"array":"object",Pe="array"===Te?{open:"[",close:"]"}:{open:"{",close:"}"},Re=e=>{"Enter"===e.key&&(e.metaKey||e.shiftKey||e.ctrlKey)?ze():"Escape"===e.key&&Me()},Ve=e=>{if(e.getModifierState("Alt"))return ve.current=!0,void a({collapsed:!$,path:q});l&&l.includes(X)||(ve.current=!0,a(null),H(!$))},ze=()=>{try{const e=M(I);if(c(null),pe(null),JSON.stringify(e)===JSON.stringify(u))return;v(e,q).then((t=>{t&&ge({code:"UPDATE_ERROR",message:t},e)}))}catch(i){ge({code:"INVALID_JSON",message:z("ERROR_INVALID_JSON",Z)},I)}},Fe=q.length>0?()=>{x(u,q).then((e=>{e&&ge({code:"DELETE_ERROR",message:e},g(u,q))}))}:void 0,Me=()=>{c(null),pe(null),L(_(u))},{isEditing:_e,isEditingKey:Ie,isArray:Le,canEditKey:Ke}=he,Be="when-closed"===h?$:h,We=!_e&&Se,Ge=(R||!Le)&&!Ce&&void 0!==ee,$e=xe&&(_e&&Oe||!_e&&Ne),He=P&&"object"===Te,Ue=Object.entries(u).map((([e,t])=>["array"===Te?Number(e):e,t]));He&&Ue.sort("function"==typeof P?(e,t)=>P(e[0],t[0]):void 0);const Ye=ve.current?_e?(0,r.jsx)("div",{className:"jer-collection-text-edit",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(f,{className:"jer-collection-text-area",name:X,value:I,setValue:L,isEditing:_e,handleKeyPress:Re,styles:t("input",Z)}),(0,r.jsx)("div",{className:"jer-collection-input-button-row",children:(0,r.jsx)(J,{onOk:ze,onCancel:Me,nodeData:Z})})]})}):Ue.map((([n,o],a)=>{const i={key:n,value:o,path:[...q,n],level:q.length+1,index:a,size:j(o)?Object.keys(o).length:1,parentData:u,fullData:Z.fullData};return(0,r.jsx)("div",{className:"jer-collection-element",style:t("collectionElement",i),children:j(o)?(0,r.jsx)(le,Object.assign({},e,{data:o,parentData:u,nodeData:i,showCollectionCount:h,canDragOnto:ie}),n):(0,r.jsx)(oe,Object.assign({},e,{data:o,parentData:u,nodeData:i,canDragOnto:ie,showLabel:"object"===Te||R}),n)},n)})):null,Je=!!Ae&&$;Je||(ve.current=!0);const Xe=Object.assign(Object.assign({},e),{data:u,value:u,parentData:m,nodeData:Z,setValue:e=>y(void 0,void 0,void 0,(function*(){return yield v(e,q)})),handleEdit:ze,handleCancel:Me,handleKeyPress:Re,isEditing:_e,setIsEditing:()=>c(X),getStyles:t,canDragOnto:ie}),Ze=$e?(0,r.jsx)(xe,Object.assign({customNodeProps:De},Xe,{children:Ye})):Ye,Qe=Ie?(0,r.jsx)("input",{className:"jer-input-text jer-key-edit",type:"text",name:X,defaultValue:ee,autoFocus:!0,onFocus:e=>e.target.select(),onKeyDown:e=>{"Enter"===e.key?me(e.target.value):"Escape"===e.key&&Me()},style:{width:String(ee).length/1.5+.5+"em"}}):Ge&&(0,r.jsx)("span",{className:"jer-key-text",style:t("property",Z),onClick:e=>e.stopPropagation(),onDoubleClick:()=>Ke&&c(`key_${X}`),children:""===ee?(0,r.jsx)("span",{className:q.length>0?"jer-empty-string":void 0}):`${ee}:`}),qe=We&&(0,r.jsx)(Y,{startEdit:ie?()=>{ve.current=!0,c(X)}:void 0,handleAdd:ce?e=>{H(!1);const t=Ee(Z);"array"===Te?E(t,[...q,u.length]).then((e=>{e&&ge({code:"ADD_ERROR",message:e},t)})):e in u?ge({code:"KEY_EXISTS",message:z("ERROR_KEY_EXISTS",Z)},e):E(t,[...q,e]).then((e=>{e&&ge({code:"ADD_ERROR",message:e},t)}))}:void 0,handleDelete:se?Fe:void 0,enableClipboard:S,type:Te,nodeData:Z,translate:z,customButtons:e.customButtons}),et=(0,r.jsxs)("div",Object.assign({className:"jer-component jer-collection-component",style:Object.assign(Object.assign({marginLeft:(0===q.length?0:T/2)+"em"},t("collection",Z)),{position:"relative"}),draggable:de},ye,fe("above"),{children:[(0,r.jsx)("div",{className:"jer-clickzone",style:{width:T/2+1+"em",zIndex:10+2*Z.level},onClick:e=>Ve(e)}),!_e&&je,(0,r.jsx)(be,{position:"above",nodeData:Z}),Ae?(0,r.jsxs)("div",{className:"jer-collection-header-row",style:{position:"relative"},onClick:e=>Ve(e),children:[(0,r.jsxs)("div",{className:"jer-collection-name",children:[(0,r.jsx)("div",{className:"jer-collapse-icon jer-accordion-icon"+($?" jer-rotate-90":""),style:{zIndex:11+2*Z.level},onClick:e=>Ve(e),children:(0,r.jsx)(U,{name:"chevron",rotate:$,nodeData:Z})}),Qe,!_e&&(0,r.jsx)("span",{className:"jer-brackets jer-bracket-open",style:t("bracket",Z),children:Pe.open})]}),!_e&&Be&&(0,r.jsx)("div",{className:"jer-collection-item-count"+(Be?" jer-visible":" jer-hidden"),style:t("itemCount",Z),children:1===ae?z("ITEM_SINGLE",Object.assign(Object.assign({},Z),{size:1}),1):z("ITEMS_MULTIPLE",Z,ae)}),(0,r.jsx)("div",{className:"jer-brackets"+(Je?" jer-visible":" jer-hidden"),style:t("bracket",Z),children:Pe.close}),qe]}):Ce?(0,r.jsx)(r.Fragment,{}):(0,r.jsxs)("div",{className:"jer-collection-header-row",style:{position:"relative"},children:[Qe,qe]}),(0,r.jsxs)("div",{className:"jer-collection-inner",style:Object.assign({overflowY:Je||W?"clip":"visible",maxHeight:d(X)?void 0:G},t("collectionInner",Z)),ref:B,children:[Ze,(0,r.jsx)("div",{className:_e?"jer-collection-error-row":"jer-collection-error-row-edit",children:ue&&(0,r.jsx)("span",{className:"jer-error-slug",style:t("error",Z),children:ue})}),!_e&&Ae&&(0,r.jsx)("div",{className:"jer-brackets jer-bracket-outside",style:Object.assign(Object.assign({},t("bracket",Z)),{marginLeft:(T<3?-1:T<6?-.5:0)+"em"}),children:Pe.close})]}),(0,r.jsx)(be,{position:"below",nodeData:Z})]}));return we?(0,r.jsx)(we,Object.assign({customNodeProps:ke},Xe,{children:et})):et},ce={ITEM_SINGLE:"{{count}} item",ITEMS_MULTIPLE:"{{count}} items",KEY_NEW:"Enter new key",ERROR_KEY_EXISTS:"Key already exists",ERROR_INVALID_JSON:"Invalid JSON",ERROR_UPDATE:"Update unsuccessful",ERROR_DELETE:"Delete unsuccessful",ERROR_ADD:"Adding node unsuccessful",DEFAULT_STRING:"New data!",DEFAULT_NEW_KEY:"key"},de=(e,t)=>(n,r,o)=>((e,t,n,r,o)=>{if(t[r]){const e=t[r](n);if(null!==e)return e}const a=r in e?e[r]:ce[r];return void 0===o?a:null==a?void 0:a.replace("{{count}}",String(o))})(e,t,r,n,o);var ue=[],pe=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",o=!0===t.singleTag,a="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(o){var i=ue.indexOf(a);-1===i&&(i=ue.push(a)-1,pe[i]={}),n=pe[i]&&pe[i][r]?pe[i][r]:pe[i][r]=s()}else n=s();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function s(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),o=0;o<n.length;o++)e.setAttribute(n[o],t.attributes[n[o]]);var i="prepend"===r?"afterbegin":"beforeend";return a.insertAdjacentElement(i,e),e}}(':root{--jer-select-border:#b6b6b6;--jer-select-focus:#777;--jer-select-arrow:#777;--jer-form-border:1px solid #ededf0;--jer-form-border-focus:1px solid #e2e2e2;--jer-expand-transition-time:0.3s;--jer-highlight-color:#b3d8ff}.jer-visible{opacity:1}.jer-hidden,.jer-visible{transition:var(--jer-expand-transition-time)}.jer-hidden{opacity:0}.jer-select select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#000;cursor:inherit;font-family:inherit;font-size:.8em;line-height:inherit;margin:0;outline:none;padding:0 1em 0 0;z-index:1}select::-ms-expand{display:none}.jer-select{align-items:center;background-color:#fff;background-image:linear-gradient(0deg,#f9f9f9,#fff 33%);border:1px solid var(--jer-select-border);border-radius:.25em;cursor:pointer;display:grid;grid-template-areas:"select";line-height:1.1;max-width:15ch;min-width:12ch;padding:.25em .5em;position:relative}.jer-select select,.jer-select:after{grid-area:select}.jer-select:not(.jer-select--multiple):after{background-color:var(--jer-select-arrow);clip-path:polygon(100% 0,0 0,50% 100%);content:"";height:.5em;justify-self:end;width:.8em}select:focus+.focus{border:1px solid var(--jer-select-focus);border-radius:inherit;bottom:-1px;left:-1px;position:absolute;right:-1px;top:-1px}.jer-editor-container{border-radius:.5em;font-size:16px;line-height:1;padding:1em 1em 1em 2em;position:relative;text-align:left}.jer-editor-container textarea{border:var(--jer-form-border);border-radius:.3em;color:var(--jer-input-color);outline:none}.jer-editor-container textarea:focus{border:var(--jer-form-border-focus)}.jer-editor-container input{border:var(--jer-form-border);border-radius:.3em;font-family:inherit;outline:none}.jer-editor-container input:focus{border:var(--jer-form-border-focus)}.jer-editor-container ::selection{background-color:var(--jer-highlight-color)}.jer-collection-header-row,.jer-value-main-row{align-items:center;display:flex;gap:.3em;min-height:1.7em}.jer-collection-header-row{display:flex;flex-wrap:wrap}.jer-collapse-icon{left:-1.2em;position:absolute;top:.35em}.jer-collection-inner{position:relative;transition:var(--jer-expand-transition-time)}.jer-collection-text-edit{align-items:flex-start;display:flex;flex-direction:column;gap:.3em}.jer-collection-text-area{font-family:inherit;font-size:.85em;max-height:40em;overflow:hidden;padding:.2em .5em 0;resize:both}.jer-collection-input-button-row{display:flex;font-size:150%;justify-content:flex-end;margin-top:.4em}.jer-collection-error-row{bottom:.5em;position:absolute}.jer-error-slug{margin-left:1em}.jer-value-component{position:relative}.jer-value-main-row{display:flex;gap:0}.jer-value-and-buttons{align-items:center;display:flex;justify-content:flex-start;padding-left:.5em}.jer-value-error-row{position:absolute}.jer-value-string{line-height:1.3em;overflow-wrap:anywhere;white-space:pre-wrap}.jer-hyperlink{text-decoration:underline}.jer-input-text{font-family:inherit;font-size:.9em;height:1.4em;line-height:1.2em;margin:0;min-width:6em;overflow:hidden;padding:.25em .5em .2em;resize:none}.jer-input-boolean{margin-left:.3em;margin-right:.3em;transform:scale(1.5)}.jer-key-text{line-height:1.1em;white-space:pre-wrap;word-break:break-word}.jer-key-edit{font-size:inherit;font-size:.9em;padding:0 .3em}.jer-value-invalid{font-style:italic;opacity:.5}.jer-input-number{font-size:90%;min-width:3em}.jer-confirm-buttons,.jer-edit-buttons{align-items:center;cursor:pointer;display:flex;height:1em}.jer-input-buttons{gap:.4em}.jer-edit-buttons{gap:.4em;margin-left:.5em;opacity:0}.jer-confirm-buttons{gap:.2em;margin-left:.4em}.jer-edit-buttons:hover{opacity:1;position:relative}.jer-collection-header-row:hover>.jer-edit-buttons,.jer-value-and-buttons:hover>.jer-edit-buttons,.jer-value-main-row:hover>.jer-edit-buttons{opacity:1}.jer-copy-pulse{position:relative;transition:transform var(--jer-expand-transition-time)}.jer-copy-pulse:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-copy-pulse:after{border-radius:50%;box-shadow:0 0 15px 5px var(--jer-icon-copy-color);content:"";display:block;height:100%;left:0;opacity:0;position:absolute;top:0;transition:all .5s;width:100%}.jer-copy-pulse:active:after{border-radius:4em;box-shadow:0 0 0 0 var(--jer-icon-copy-color);left:0;opacity:1;position:absolute;top:0;transition:0s}.jer-copy-pulse:active{top:.07em}.jer-rotate-90{transform:rotate(-90deg)}.jer-accordion-icon,.jer-rotate-90{transition:transform var(--jer-expand-transition-time)}.jer-icon:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-empty-string:after{content:"<empty string>:";font-size:90%;font-style:italic}.jer-drag-n-drop-padding{border:1px dashed #e0e0e0;border-radius:.3em;height:.5em}.jer-clickzone{height:calc(100% - .8em);left:-1em;position:absolute;top:1.2em}',{});const ge=({data:e,setData:t,rootName:n="root",onUpdate:a=(()=>{}),onEdit:i=a,onDelete:s=a,onAdd:l=a,onChange:c,onError:d,showErrorMessages:u=!0,enableClipboard:p=!0,indent:g=2,collapse:m=!1,collapseAnimationTime:h=300,showCollectionCount:f=!0,restrictEdit:b=!1,restrictDelete:v=!1,restrictAdd:E=!1,restrictTypeSelection:x=!1,restrictDrag:D=!0,searchFilter:w,searchText:k,searchDebounceTime:C=350,keySort:S=!1,showArrayIndices:O=!0,showStringQuotes:A=!0,defaultValue:T=null,minWidth:P=250,maxWidth:R="min(600px, 90vw)",rootFontSize:V,stringTruncate:z=250,translations:F={},className:M,id:_,customText:I={},customNodeDefinitions:L=[],customButtons:K=[],jsonParse:B=JSON.parse,jsonStringify:W=(e=>JSON.stringify(e,null,2)),errorMessageTimeout:G=2500})=>{const{getStyles:$}=N(),H=(0,o.useCallback)(ye(m),[m]),U=(0,o.useCallback)(de(F,I),[F,I]),[Y,J]=(0,o.useState)(k),[X,Z]=(({setData:e,data:t})=>{const[n,r]=(0,o.useState)(e?void 0:t),a=(0,o.useCallback)((t=>{e?e(t):r(t)}),[e]);return(0,o.useEffect)((()=>{e||r(t)}),[t]),[e?t:n,a]})({setData:t,data:e}),Q=document.querySelector(":root"),q=getComputedStyle(document.documentElement).getPropertyValue("--jer-expand-transition-time");1e3*parseFloat(q)!==h&&(null==Q||Q.style.setProperty("--jer-expand-transition-time",h/1e3+"s")),(0,o.useEffect)((()=>{const e=setTimeout((()=>J(k)),C);return()=>clearTimeout(e)}),[k,C]);const ee={key:n,path:[],level:0,index:0,value:X,size:"object"==typeof X&&null!==X?Object.keys(X).length:1,parentData:null,fullData:X},te=(e,t)=>y(void 0,void 0,void 0,(function*(){const n=yield e(t);if(!0===n||void 0===n)return void Z(t.newData);const r=je(n)?n:["error",n],[o,a]=r;if("error"===o)return Z(t.currentData),!1===a?U("ERROR_UPDATE",ee):String(a);Z(a)})),ne=(0,o.useMemo)((()=>ye(b)),[b]),re=(0,o.useMemo)((()=>ye(v)),[v]),ae=(0,o.useMemo)((()=>ye(E)),[E]),ie=(0,o.useMemo)((()=>ye(D)),[D]),se=(0,o.useMemo)((()=>fe(w)),[w]),ce={name:n,nodeData:ee,onEdit:(e,t)=>y(void 0,void 0,void 0,(function*(){const{currentData:n,newData:r,currentValue:o,newValue:a}=he(X,t,e,"update");if(o!==a)return yield te(i,{currentData:n,newData:r,currentValue:o,newValue:a,name:t.slice(-1)[0],path:t})})),onDelete:(e,t)=>y(void 0,void 0,void 0,(function*(){const{currentData:n,newData:r,currentValue:o,newValue:a}=he(X,t,e,"delete");return yield te(s,{currentData:n,newData:r,currentValue:o,newValue:a,name:t.slice(-1)[0],path:t})})),onAdd:(e,t)=>y(void 0,void 0,void 0,(function*(){const{currentData:n,newData:r,currentValue:o,newValue:a}=he(X,t,e,"add");return yield te(l,{currentData:n,newData:r,currentValue:o,newValue:a,name:t.slice(-1)[0],path:t})})),onChange:c,onError:d,showErrorMessages:u,onMove:(e,t,n)=>y(void 0,void 0,void 0,(function*(){if(null===e)return;const{currentData:r,newData:o,currentValue:a}=he(X,e,"","delete"),s=e.slice(-1)[0],l=t.slice(0,-1),c=t.slice(-1)[0];let d="number"==typeof c?"above"===n?c:c+1:"number"==typeof s?`arr_${s}`:s;e.slice(0,-1).join(".")===t.slice(0,-1).join(".")&&"number"==typeof s&&"number"==typeof d&&s<d&&(d-=1);const u="number"==typeof d?{insert:!0}:"above"===n?{insertBefore:c}:{insertAfter:c},{newData:p,newValue:g}=he(o,[...l,d],a,"add",u);return yield te(i,{currentData:r,newData:p,currentValue:a,newValue:g,name:t.slice(-1)[0],path:t})})),showCollectionCount:f,collapseFilter:H,collapseAnimationTime:h,restrictEditFilter:ne,restrictDeleteFilter:re,restrictAddFilter:ae,restrictTypeSelection:x,restrictDragFilter:ie,canDragOnto:!1,searchFilter:se,searchText:Y,enableClipboard:p,keySort:S,showArrayIndices:O,showStringQuotes:A,indent:g,defaultValue:T,stringTruncate:z,translate:U,customNodeDefinitions:L,customButtons:K,parentData:null,jsonParse:B,jsonStringify:W,errorMessageTimeout:G},ue=Object.assign(Object.assign({},$("container",ee)),{minWidth:P,maxWidth:R});return ue.fontSize=null!=V?V:ue.fontSize,(0,r.jsx)("div",{id:_,className:"jer-editor-container "+M,style:ue,children:j(X)?(0,r.jsx)(le,Object.assign({data:X},ce)):(0,r.jsx)(oe,Object.assign({data:X,showLabel:!0},ce))})},me=e=>(0,r.jsx)(O,{theme:e.theme,icons:e.icons,children:(0,r.jsx)(ee,{children:(0,r.jsx)(ge,Object.assign({},e))})}),he=(e,t,n,r,o={})=>{if(0===t.length)return{currentData:e,newData:n,currentValue:e,newValue:n};const a=Object.assign({remove:"delete"===r},o),i="add"!==r?g(e,t):void 0;return{currentData:e,newData:c(e,t,n,a),currentValue:i,newValue:"delete"!==r?n:void 0}},ye=e=>"boolean"==typeof e?()=>e:"number"==typeof e?({level:t})=>t>=e:e,fe=e=>{if(void 0!==e)return"value"===e?E:"key"===e?x:"all"===e?(e,t)=>E(e,t)||x(e,t):e},je=e=>Array.isArray(e)&&2===e.length&&["error","value"].includes(e[0])}}]);