"use strict";(self.webpackChunkscalekit_docs=self.webpackChunkscalekit_docs||[]).push([[488],{996:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>h,contentTitle:()=>n,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var o=i(4848),t=i(8453);const r={},n="Webhooks",a={id:"scim/bkp/webhooks",title:"Webhooks",description:"Webhooks are powerful tools that allow your application to receive real-time",source:"@site/docs/scim/bkp/webhooks.mdx",sourceDirName:"scim/bkp",slug:"/scim/bkp/webhooks",permalink:"/docs-staging/scim/bkp/webhooks",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},h={},c=[{value:"Webhook Security",id:"webhook-security",level:2},{value:"Webhook Signature verification",id:"webhook-signature-verification",level:3},{value:"Webhook Timestamp verification",id:"webhook-timestamp-verification",level:3},{value:"Directory Sync Webhooks",id:"directory-sync-webhooks",level:2}];function l(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components},{CodeWithHeader:i,SimpleCode:r,TabItem:n,Tabs:a}=s;return i||u("CodeWithHeader",!0),r||u("SimpleCode",!0),n||u("TabItem",!0),a||u("Tabs",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,o.jsx)(s.p,{children:"Webhooks are powerful tools that allow your application to receive real-time\nnotifications about specific occurrences within the ScaleKit system. Events\nrepresent specific actions or changes, while webhooks are the mechanism used to\ndeliver these event notifications to your specified endpoint."}),"\n",(0,o.jsx)(s.p,{children:"By leveraging webhooks, you can build responsive and dynamic integrations that\nreact immediately to changes in your directory sync data, enabling you to keep\nyour systems in sync and automate user provisioning and deprovisioning."}),"\n",(0,o.jsx)(s.h2,{id:"webhook-security",children:"Webhook Security"}),"\n",(0,o.jsx)(s.p,{children:"While webhooks are a powerful tool for receiving real-time updates, it's\nimportant to ensure that you always verify if the incoming webhooks is indeed\ncoming from Scalekit and not from a malicious actor."}),"\n",(0,o.jsx)(s.p,{children:"There are typically two types of webhook security mechanisms that you can use to\nensure the authenticity and integrity of the incoming webhook."}),"\n",(0,o.jsx)(s.h3,{id:"webhook-signature-verification",children:"Webhook Signature verification"}),"\n",(0,o.jsx)(s.p,{children:'Every incoming webhook is signed with a secret key. This secret key is available\nin the Scalekit Dashboard under the "Webhooks" section.'}),"\n",(0,o.jsxs)(s.p,{children:["A cryptographic hash is generated for the payload containing webhook id, webhook\nbody and the timestamp with the webhook secret as a key using the HMAC-SHA256\nalgorithm. This signature is then sent as part of the ",(0,o.jsx)(s.code,{children:"svix-signature"})," header.\nYou can use the following code to locally compute the signature and verify the\nwebhook signature if it matches with the one sent by Scalekit:"]}),"\n",(0,o.jsx)(i,{title:"Webhook Signature Verification",children:(0,o.jsxs)(a,{children:[(0,o.jsx)(n,{label:"Node.js",value:"Node.js",children:(0,o.jsx)(s.pre,{className:"shiki shiki-themes one-light github-dark",style:{backgroundColor:"#FAFAFA","--shiki-dark-bg":"#24292e",color:"#383A42","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:(0,o.jsxs)(s.code,{className:"language-javascript",children:[(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"#A0A1A7","--shiki-dark":"#6A737D",fontStyle:"italic","--shiki-dark-font-style":"inherit"},children:"// Work in progress"})}),"\n",(0,o.jsx)(s.span,{className:"line"})]})})}),(0,o.jsx)(n,{label:"Python",value:"Python",children:(0,o.jsx)(s.pre,{className:"shiki shiki-themes one-light github-dark",style:{backgroundColor:"#FAFAFA","--shiki-dark-bg":"#24292e",color:"#383A42","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:(0,o.jsxs)(s.code,{className:"language-python",children:[(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"import"}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" hmac"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"import"}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" hashlib"})]}),"\n",(0,o.jsx)(s.span,{className:"line"}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"def"}),(0,o.jsx)(s.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:" verify_webhook_signature"}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"("}),(0,o.jsx)(s.span,{style:{color:"#986801","--shiki-dark":"#E1E4E8"},children:"webhook_body"}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","}),(0,o.jsx)(s.span,{style:{color:"#986801","--shiki-dark":"#E1E4E8"},children:" signature"}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","}),(0,o.jsx)(s.span,{style:{color:"#986801","--shiki-dark":"#E1E4E8"},children:" secret_key"}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"):"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"    computed_signature "}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#F97583"},children:"="}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" hmac.new(secret_key.encode(), webhook_body, hashlib.sha256).hexdigest()"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"    return"}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" computed_signature "}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#F97583"},children:"=="}),(0,o.jsx)(s.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" signature"})]}),"\n",(0,o.jsx)(s.span,{className:"line"})]})})})]})}),"\n",(0,o.jsx)(s.h3,{id:"webhook-timestamp-verification",children:"Webhook Timestamp verification"}),"\n",(0,o.jsx)(s.p,{children:"Even though the webhook signature verification is enough to ensure that the\nincoming webhook is indeed coming from Scalekit and not from a malicious actor,\nwe also recommend that you verify the webhook timestamp to ensure that the\nwebhook is not stale or just replayed after sometime."}),"\n",(0,o.jsx)(s.p,{children:"To mitigate the risk of replay attacks, we recommend that you verify the webhook\ntimestamp and ensure that the webhook is within a tolerance window of 60\nseconds. Our SDKs and libraries provide helper functions to verify the webhook\ntimestamp automatically as part of the webhook signature verification process."}),"\n",(0,o.jsx)(s.h2,{id:"directory-sync-webhooks",children:"Directory Sync Webhooks"}),"\n",(0,o.jsx)(s.p,{children:"Below are the list of Directory Sync webhooks that you can use to listen for\nchanges in the directory and update the user's roles in your application."}),"\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{children:"Event Type"}),(0,o.jsx)(s.th,{children:"Use Case"}),(0,o.jsx)(s.th,{children:"Description"})]})}),(0,o.jsxs)(s.tbody,{children:[(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:(0,o.jsx)(r,{children:"scalekit.dir.user.create"})}),(0,o.jsx)(s.td,{children:"Automated User Provisioning"}),(0,o.jsxs)(s.td,{children:["Triggered when a new user is added to the directory. ",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"Detailed Webhook payload can be found ",(0,o.jsx)(s.a,{href:"/apis#tag/Webhooks/scalekit.dir.user.create",children:"here"})]})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:(0,o.jsx)(r,{children:"scalekit.dir.user.update"})}),(0,o.jsx)(s.td,{children:"Automated User Profile Updates"}),(0,o.jsxs)(s.td,{children:["Triggered when a user's information is modified in the directory. ",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"Detailed Webhook payload can be found ",(0,o.jsx)(s.a,{href:"/apis#tag/Webhooks/scalekit.dir.user.update",children:"here"})]})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:(0,o.jsx)(r,{children:"scalekit.dir.user.delete"})}),(0,o.jsx)(s.td,{children:"Automated User Deprovisioning"}),(0,o.jsxs)(s.td,{children:["Triggered when a user is removed from the directory. ",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"Also triggered when a user's status is marked as ",(0,o.jsx)(s.code,{children:"inactive"})," in the directory or if the user is removed from all groups assigned to this application. ",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"Detailed Webhook payload can be found ",(0,o.jsx)(s.a,{href:"/apis#tag/Webhooks/scalekit.dir.user.delete",children:"here"})]})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:(0,o.jsx)(r,{children:"scalekit.dir.user.update"})}),(0,o.jsx)(s.td,{children:"Automated User Role Assignment"}),(0,o.jsxs)(s.td,{children:["To implement automated role assignment, you must enable the ",(0,o.jsx)(s.a,{href:"/scim/gbac",children:'"Group Based Access Control"'})," setting in the Scalekit Dashboard and configure all the available roles in your application. ",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"As part of your customer's Directory Sync configuration, your customers would configure the mapping between the Groups in their Directory Provider and the Roles in your application. ",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"Scalekit will automatically listen to the changes of user and group assignment in your customer's Directory Provider and based on your customer's configuration, we will update the ",(0,o.jsx)(s.code,{children:"roles"})," attribute of the user. ",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"Detailed Webhook payload can be found ",(0,o.jsx)(s.a,{href:"/apis#tag/Webhooks/scalekit.dir.user.update",children:"here"})]})]})]})]}),"\n",(0,o.jsxs)(s.p,{children:["For a detailed list of all the available webhooks and the corresponding webhook\npayloads, refer to our API Documentation ",(0,o.jsx)(s.a,{href:"/apis#tag/Webhooks",children:"here"}),"."]})]})}function d(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}function u(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,s,i)=>{i.d(s,{R:()=>n,x:()=>a});var o=i(6540);const t={},r=o.createContext(t);function n(e){const s=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:n(e.components),o.createElement(r.Provider,{value:s},e.children)}}}]);